,query,data
0,failed-to-install-cuda-11-7-with-error-processing-package-nvidia-dkms-515,"I am trying to install cuda on a small factor pc (NUC phantom canyon, NUC11PHKi7) which has an RTX2060 card and runs Ubuntu 22.04.3 LTS (jammy) .I am trying to install CUDA 11.7 using these instructions from the nvidia website but I am hitting an error:In case it helps, the make.log is below:
make.log (998.7 KB)Can you guys help with this? it will be massively appreciated!Powered by Discourse, best viewed with JavaScript enabled"
1,feature-g-sync-freesync-under-wayland-session,"As per topic:
Has there been any work on getting this working ?
I haven’t seen any discussions, so please excuse me in case it’s been discussed somewhere.We are all waiting on this and I absolutely can’t wait for it. Hopefully it is not too far away, it is one of my favorite features!The drm crtc property VRR_ENABLED is supported by the nvidia driver.But the connector property vrr_capable is not.When will support be added?@amrits I’m not sure if you guys are in the process of implementing VRR yet, but I just wanted to check in with you and hopefully get a reference pointThere are dozens of us waiting for this!  Dozens!It seems like the G-Sync/Freesync support under wayland has arrived in driver 525.53, I can see the option on KDE Plasma now!

Screenshot_20221117_214701762×588 72.1 KB
EDIT: However while the option is there, gsync itself doesn’t seem to kick in, I do believe it could be due to this specific part nvidia driver part how kwin is designed, bug → 450914 – Wayland, games on Nvidia are force vsyncedI will try on sway or hyperland later!Using sway it is not the case I believe the option needs to show up in the nvidia-settings application first. hopefully soon, with the 525.53 drivers hyprland is running much better!@jrgiacone Please check how you need to enable adaptive sync on sway.https://wiki.archlinux.org/title/Variable_refresh_rateAs far as I can see you need to specify a command output * adaptive_sync on as on KDE it shows up in kscreen settings.(NOTE: The option was not visible on any driver prior to 525.53)I have it enabled in sway and hyprland, it looks like it tries  to do something as my display changes to 48hz if nothing is on the screen or moving, however, when using a game or anything it just stays at 144 even if the game is showing less frames. So I would say it’s not working yet.Nothing in sway working, monitor stays at 144Here in sway:
[jrgiacone@nixos:~]$  swaymsg -t get_outputs
Output DP-2 ‘Goldstar Company Ltd 27GL850 004NTUW2N910’ (focused)
Current mode: 2560x1440 @ 144.000 Hz
Position: 0,0
Scale factor: 1.000000
Scale filter: nearest
Subpixel hinting: unknown
Transform: normal
Workspace: 1
Max render time: off
Adaptive sync: enabledbut can confirm on my monitor hud it is not workingThis would be incredible to have on Sway! There aren’t too many items keeping me off Wayland these days… but this is one of them.Seems like we are getting closer, just not there yet. The option to enable it wasn’t even available before 525.53.Please Nvidia, I am begging for this in the next big update.Support for GSync for Wayland was introduced since 525.53 release for Volta or newer GPU. There was a note in Appendix L. Wayland Known Issues :Variable display refresh rate capabilities such as G-Sync are supported on Volta or newer GPUs with Wayland. Older GPUs are not supported.Support for older GPUs is planned for later release and work is in progress.To enable GSync, you need to enable VRR in your Wayland compositor. For example, KDE detects VRR support and provides options in System Settings as posted in screenshots above. There are no toggles in nvidia-settings for Wayland there.If you have issues, please provide more details making sure you have supported GPU (which Wayland compositor are you using, GPU, monitor, driver version and running GUI applications - the more details the better).It’s interesting that the support for GSync lines up with the introduction of NVAPI, which is used in Windows for enabling/disabling GSync. Is this a coincidence or is Nvidia going to finally open-source NVAPI in its entirety?Thank you for taking the time to reply. I assumed it was not working based on my experience and testing. From what I have experienced, any games I tried to play with VRR enabled did not reflect VRR being active. I also cannot find anywhere people reporting that they have VRR working under Wayland with NVIDIA GPUs. I’m not great at testing since I do not know how to test and prove results. It would also appear that everyone else in this thread has not been able to get it to work either.Distro: Arch Linux
Desktop Enviroment: KDE Plasma 5.27
Wayland Compositor: kwin
GPU: Asus ROG STRIX RTX 3090ti
Monitors:Driver: NVIDIA- DKMS 525.89.02 w/  DRM kernel mode setting and early loading
Applications: Steam - Any GamesVRR doesn’t seem to work on both native wayland and xwayland applications, I did report such behavior + tried to debug, but didn’t seem to get anything useful.
With 530 driver I can no longer even boot into any wayland session(sway,hyprland, kde, gnome) and I’m not the only one affected.9 votes and 5 comments so far on RedditI have been successful in installing the beta 530.30.02 drivers and getting into a Wayland session on gnome 43.3. Only there is a caveat, I cannot set any monitors above 120hz. As mentioned above I have 3 monitors.When I initially loaded into the desktop the 2 high refresh rate monitors went black and only the 75hz monitor was on. I was able to open the display settings from there and played around with the settings. The highest setting I can go before both monitors turns off is 120hz. I am running the mutter-vrr and gnome-control-center-vrr from the AUR so I will test to see if there is any functioning VRR next and post what I find in an edit.
The packages I installed are as follows:
nvidia-beta-dkms 530.30.02-1
nvidia-settings-beta 530.30.02-1
nvidia-utils-beta 530.30.02-1
opencl-nvidia-beta 530.30.02-1
lib32-nvidia-utils-beta 530.30.02-1
lib32-opencl-nvidia-beta 530.30.02-1Edit: So I have been playing around with some games and ran vrrtest-git and it’s hard for me to notice any difference when trying to toggle it on and off while the FPS fluctuates. I am going to go out on a limb here and say that it is still not working from what I can tell. As far as the monitor goes, I, unfortunately, don’t have any HUD that displays the refresh rate so I can’t tell for sure. Hopefully, someone else will be able to tell for sure.I can confirm that it does not appear to be working still. I have tried with vrrtest, gl-gsync-demo, overwatch, and league. My monitors OSD  shows that it syncs the refresh rate for a second then jumps to the maximum. I’ve tried on sway, hyprland, and KDE. Works perfectly for all 4 with KDE xorg.530.41.03Fedora 38 - Gnome 446.2.8-300.fc38.x86_64NVIDIA GeForce GTX 1650 SUPER (UUID: GPU-1b82f730-b99a-4e6a-32b8-a1f703cb5034)Nvidia on wayland is working really fine right now, but I insist, we really need g-sync (vrr) to work on wayland, mostly on low end cards that can’t keep high frame rates always, the experience in games is horrible when you get lower fps that your monitor hz.(option to enable vrr is showing on gnome or kde control center but is not working properly, the monitor just lower randomly and inacurrate the hz on some moments, nothing that help, atleast we are somehow close)-Have a g-sync (or g-sync compatible) monitor, with a nvidia card, use the drivers for linux
-Install any GNU/LINUX distro, with a desktop that have wayland working (example:gnome, kde)
-Patch gnome with vrr if is necessary, on kde is enabled by default, go to monitor settings and enable vrr.
-Test vrr on a game or on a special test for itResults: g-sync still not working on wayland, we really need this.Powered by Discourse, best viewed with JavaScript enabled"
2,how-to-implement-ota-upgrade-for-rootfs-using-jetson-agx-orin-devkit,"Hi，
I saw the official website document regarding the OTA upgrade of the NX series rootfs, but I did not see the relevant introduction of the Orin series.
May I ask how to perform OTA upgrade for the Orin seriesPowered by Discourse, best viewed with JavaScript enabled"
3,nvidia-mosaic-rez-limits-incr-to-32k,"Hi,Is it possible to increase the NVidia Mosaic limit from 16384 x16384   to   32767 x 32767 ?Limits info appears in Appendix A, page 20:1255.51 KBWe’re planning a system with 4 x Quadro GPUs, thus 16 x 4K outputs in portrait.
Without overlap 16 * 2160 = 34,560 pixels,
however with horizontal overlap our expected total width is ~30,000 pixels.Thus, the desired total resolution for NVidia Mosaic is 30,000 x 4096   (?)AFAIK the maximum X11 resolution is 32767 x 32767
this is simply due to the sizeof an integer in “C”, back in the 1980’s!
Indeed   ""xrandr | grep maximum""  reports 32767 x 32767Given the recent drivers are open source, might this be a possible mod?Why is NVidia Mosaic limited to 16384 x 16384?thanks,
ben.Powered by Discourse, best viewed with JavaScript enabled"
4,nvidia-driver-is-not-working-on-ubuntu-22-04,"Hello,I have finally bought a computer with a Nvidia graphics card, and I cannot find why the drivers are not working, even though the card is recognized by the OS and the recommended driver 525 is installed.$ nvidia-smi
NVIDIA-SMI has failed because it couldn’t communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.$ uname -r
5.19.0-40-generic$ nvidia-settingsERROR: NVIDIA driver is not loaded(nvidia-settings:5756): GLib-GObject-CRITICAL **: 23:57:54.696: g_object_unref: assertion ‘G_IS_OBJECT (object)’ failed** (nvidia-settings:5756): CRITICAL **: 23:57:54.697: ctk_powermode_new: assertion ‘(ctrl_target != NULL) && (ctrl_target->h != NULL)’ failedERROR: nvidia-settings could not find the registry key file or the X server is
not accessible. This file should have been installed along with this
driver at
/usr/share/nvidia/nvidia-application-profiles-key-documentation. The
application profiles will continue to work, but values cannot be
prepopulated or validated, and will not be listed in the help text.
Please see the README for possible values and descriptions.I have already tried to purge and reinstall the drivers and to prime-select.
If needed, here is the bug report:
nvidia-bug-report.log (598.7 KB)Is there anything I can do?
Thank you in advance for your help.There are no kernel modules installed, also secure boot is enabled.
Please disable secure boot in bios, the try reinstalling kernel headers
sudo apt install --reinstall linux-headers-$(uname -r)
afterwards, please post the output of
dkms statusThank you for your answer. I have reinstalled the kernel headers and disabled secure boot.
The output is:$ dkms status
nvidia-srv/525.105.17, 5.19.0-40-generic, x86_64: installedThe outputs of nvidia-smi and nvidia-settings are normal now.However, I can access the desktop environment with TeamViewer only. The screen that is plugged to the HDMI port of the graphics card stays black at boot. The screen isn’t even detected by Ubuntu, and this was not the case before.
Do you have any idea why? Should I downgrade to a previous version of the driver?Rather looks like the driver is loading too late. Please create a ne nvidia-bug-report.logHere it is:
nvidia-bug-report.log (3.2 MB)Thank you again for your help!You have installed a dummy driver. Please delete /usr/share/X11/xorg.conf.d/xorg.confWhat worked for me for ubuntu 22.04 with kernel 6.2.0 for CUDA 11,8
is :
reinstalling the kernel headers usingmanually installing the nvidia-driver-525 from the apt managerFor some reason, the driver version 520 that comes with the CUDA 11.8 toolkit doesn’t work with the new upgraded kernel.
And then manually installing the CUDA toolkit through the run file instead of the debian package ( THIS IS OPTIONAL) - for only folks who need the cuda toolkitPowered by Discourse, best viewed with JavaScript enabled"
5,nvidia-settings-not-working-properly-on-ubuntu-22-04,"I have an RTX 2060 and it worked just fine in Ubuntu 20.04, but the moment I went to 22.04 it stopped working. I reinstalled the drivers and nvidia-smi seems to have a normal output, but nvidia-settings doesn’t display any of the settings I had before, even after making sure secure boot was disabled and deleting the xorg.confPowered by Discourse, best viewed with JavaScript enabled"
6,freebsd-feature-deprecation-schedule,"This post was updated to note that the release 470 series will be the last to support FreeBSD 12.1 and older.Powered by Discourse, best viewed with JavaScript enabled"
7,dev-nvidia-uvm-io-error-on-ubuntu-22-04-520-to-535-driver-versions,"This is the same observation as I posted in another thread on disappearing OpenCL icd on Ubuntu 22.04after some extended use on a Ubuntu 22.04 box, I noticed that CUDA programs also fails to find NVIDIA GPUs when this happens. Similar to my observation for my OpenCL code, my CUDA code also fails to list NVIDIA GPU and get a -999 unknown error from CUDA.I’ve been observing this behavior for a few months now. After a fresh reboot, usually the NVIDIA GPU can function correctly for a few days under both OpenCL and CUDA. However, after a few suspend+wakeup cycles, some times after 1-2 days, some times after 3-4 days, the NVIDIA GPU disappears from both CUDA and OpenCL (including clinfo output), despite that nvidia-smi can still list the device.I observed this on RTX 2060 and RTX 4090, both on Ubuntu 22.04. Same driver version (52x or 53x) works fine on older versions of Ubuntu (20.04 and 18.04). So, it seems something in Ubuntu 22.04 or kernel 5.15 has some issue with NVIDIA drivers.Using strace, I captured the system calls when the GPU is working vs when it broke, and I found that the difference is that when the GPU disappears, reading-writing char-device /dev/char/504:0, which is a symbolic link to /dev/nvidia-uvm gives a “ENOENT (No such file or directory)” error, and reading-writing /dev/nvidia-uvm directly gives a EIO (Input/output error) error.here is a snippet of the log printed when trying to list CUDA devices using my program mcxwhen the GPU is usable, usually /dev/char/504:0 exists and can be read normally.my OpenCL listing device returned similar error messages (/dev/char/504:0 disappears and /dev/nvidia-uvm IO error) when the GPU is not accessible.through google, I found a similar report, although, in my case, nvidia-uvm kernel module can be listed and the below command has no error.here is the modinfo outputPowered by Discourse, best viewed with JavaScript enabled"
8,phantom-display-on-nvidia-535-86-05-8,"since this driver version a second display is present on the system even though i have only one screen, it messes with my monitor by changing the refresh rate, i can disable it, but it’s not very stable. i’ve actually had this issue happen to me at least twice before on different versions before being fixed just for it to happen again, i suppose this is related.
Screenshot from 2023-08-05 15-22-181102×762 27.8 KBnvidia-bug-report.log.gz (274.9 KB)If you are on fedora, disable simpledrmam not, running archPowered by Discourse, best viewed with JavaScript enabled"
9,brightness-scale-is-incorrect,"My OS is Ubuntu 22.04.2, kernel version is 5.19.0-45-generic, I use 530.41.03 NVIDIA driver. As I found out, NVIDIA uses its own files for brightness settings, which are stored at the path /sys/class/backlight/nvidia_0/ and the brightness value can be set in the range from 1 to 100. When starting the system, I have a brightness of 10, which is recorded in the file brightness and this value is actually the maximum brightness. However, if for instance I set the brightness value to 11, then this will actually become the minimum brightness value, and by increasing the value to 100, I will again reach the maximum brightness. Thus, I have a duplicate brightness ranges from 1 to 10, and from 11 to 100. I can still change the brightness setting via the interface, or using the FN key, however, if I reduce the brightness value once after the system starts, I will actually get from the maximum value, a value of 50% (5/100). And in the same way, if I increase the brightness 1 time, I will get from the maximum value, a value of ~5% (15/100). I guess I could adjust the minimum brightness value to 11 by creating a min_brightness file, since there is a max_brightness file with a value of 100, however I don’t have permission to check this. Is there any way to fix this?I have this exactly same problem. I am using a laptop that has a MUX Switch and this happen when the MUX Switch is set to NVIDIA-only. The file brightness and actual_brightness are different from each other, looks like the NVIDIA driver is interpreting 100 as 10.0 and 45 as 4.5, but the value 4 is interpreted as 4.0, that’s the reason why 4 and 40 have the same brightness.The problem was solved after updating the drivers to version 535Powered by Discourse, best viewed with JavaScript enabled"
10,144hz-monitor-only-gets-60hz-refresh-rate-on-dp-0-port,"About 3 years ago, @generix helped me setup a dual-external-monitor system on a hybrid-graphics (Ryzen 4800H+RTX2060) gaming laptop running Ubuntu, and it has been running well. I’ve upgraded the (X)Ubuntu OS from 18.04 → 20.04, and to 22.04 earlier this year, and also upgrade my external monitors from full HD to 2k.My two external monitors are now both Samsung LS27R75 2K monitors capable of 144Hz refresh rate. I noticed that the monitor connected via the HDMI on the laptop is getting 144Hz refresh rate, but the one connected via USB-C → adapter → HDMI, labeled as DP-0 port, is only getting 60Hz refresh rate.it has’t been bothering me much with 60Hz, but when displaying certain shades, I do see flickering. so I am hoping if I can make both to work at 144Hz.From @generix’s previous posts, it seems the on-board HDMI port and DP-0 are connected to different GPU in this hybrid system and one of those is doing a video by-pass. I am wondering there is a way we can force the USB-C->HDMI adapter to provide 144Hz rate, I thought USB-C port has much higher bandwidth.I am appreciated if anyone knows how to configure this monitor to use the higher refresh rate.here is the nvidia-setting dialog showing the two monitor’s available modes - you can see for 2k resolution, it only lists 60Hz for the non-prime monitor.dp0_monitor853×801 35.7 KBHere is my xrandr -q output, you can see that DP-0 also does not have 144Hz under 2k.If it’s related to this issue, it might be worth trying a 525 driver.I am already on a 525 driver.What adapter?
Specs available?Please also run nvidia-bug-report.sh as root and attach the resulting file here.
When running Xorg, this should shed some light which modes the driver sees.Powered by Discourse, best viewed with JavaScript enabled"
11,no-display-output-when-nvidia-driver-installed-ubuntu-22-04-2,"Good morning,
I have been struggling now for over a week to install the NVIDIA drivers on my UBUNTU system.VGA compatible controller: NVIDIA Corporation TU106M [GeForce RTX 2060 Mobile] (rev a1)
Linux: 5.19.0-43-generic #44~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC  x86_64 x86_64 x86_64 GNU/LinuxI went to the nvidia website to look for the latest supported driver, which would be:
|Version: |535.54.03|
|Release Date: |2023.6.14 |I have installed it via the .run package i downloaded, I also installed this package via the ‘Additional Drivers’ section in the ‘Software Updates’ section on my Ubuntu system.Sadly, all of the different ways i tried installing them, and and all of the multiple different driver versions I tried, all lead to a black screen when I reboot my PC.The only one that works is the xorg-nouveau drivers, but this is ofcourse not good enough for me.I would really appreciate a bit of help here as i have been trying to make this work for a while now and i would like to take full advantage of my GPU.Many thanks for the support!Please run nvidia-bug-report.sh as root and attach the resulting nvidia-bug-report.log.gz file to your post.nvidia-bug-report.log.gz (122.5 KB)Here you go, many thanks for your assistance in this :) !
@generixLooks like you tried to install an outdated 460 driver from runfile, please uninstall it by running it again with --uninstall option, then install the driver from repo, e.g.
sudo apt install nvidia-driver-530Good morning,
I wish it was that easy. I tried it like many times before and it gets stuck at a black screen when booting.
Please find attached the new bug report.
@generixnvidia-bug-report.log.gz (112.3 KB)@generix  any luck here? because i really don’t know how to get it done…@njuffa would appreciate if you can find what is wrong here :)Sorry, I don’t do Ubuntu.Are there rational reasons for this bias? Two, in my thinking: (1) Built by the “think different” portion of the Linux community: various things work slightly different than with other distros, for no good reason in my perception (2) Seems to give rise to more problems reported on the internet than any other distro, even taking into account market share.I am also having the same issues. I’ve been spending days on trying to get drivers to work but just end up with a black screen when booting. gonna start trying other linux distros i guess.Powered by Discourse, best viewed with JavaScript enabled"
12,a10-card-error-probe-of-000000-0-failed-with-error-1,"I have two card ，T4 and A10.The T4 card is work well on my Server(Red hat linux 64). But, A10 was error。dmesg log:
root@localhost:~>dmesg | grep “0b:00”
[    2.141504] pci 0000:0b:00.0: [10de:2236] type 00 class 0x030200
[    2.141530] pci 0000:0b:00.0: reg 0x10: [mem 0x92000000-0x92ffffff]
[    2.141543] pci 0000:0b:00.0: reg 0x14: [mem 0xd4901c0800000000-0xd4901c0fffffffff 64bit pref]
[    2.141556] pci 0000:0b:00.0: reg 0x1c: [mem 0xd6000000-0xd7ffffff 64bit pref]
[    2.141638] pci 0000:0b:00.0: PME# supported from D0 D3hot
[    2.141680] pci 0000:0b:00.0: reg 0xbf0: [mem 0x93800000-0x9383ffff]
[    2.141683] pci 0000:0b:00.0: VF(n) BAR0 space: [mem 0x93800000-0x93ffffff] (contains BAR0 for 32 VFs)
[    2.141695] pci 0000:0b:00.0: reg 0xbf4: [mem 0x00000000-0x7fffffff 64bit pref]
[    2.141699] pci 0000:0b:00.0: VF(n) BAR1 space: [mem 0x00000000-0xfffffffff 64bit pref] (contains BAR1 for 32 VFs)
[    2.141710] pci 0000:0b:00.0: reg 0xbfc: [mem 0x00000000-0x01ffffff 64bit pref]
[    2.141713] pci 0000:0b:00.0: VF(n) BAR3 space: [mem 0x00000000-0x3fffffff 64bit pref] (contains BAR3 for 32 VFs)
[    2.169046] pci 0000:0b:00.0: can’t claim BAR 1 [mem 0xd4901c0800000000-0xd4901c0fffffffff 64bit pref]: no compatible bridge window
[    2.182094] pnp 00:00: disabling [mem 0x80000000-0x8fffffff disabled] because it overlaps 0000:0b:00.0 BAR 8 [mem 0x00000000-0xfffffffff 64bit pref]
[    2.182097] pnp 00:00: disabling [mem 0xfe000000-0xfebfffff disabled] because it overlaps 0000:0b:00.0 BAR 8 [mem 0x00000000-0xfffffffff 64bit pref]
[    2.182101] pnp 00:00: disabling [mem 0xe8002000-0xe8003fff disabled] because it overlaps 0000:0b:00.0 BAR 8 [mem 0x00000000-0xfffffffff 64bit pref]
[    2.191161] pci 0000:0b:00.0: BAR 1: no space for [mem size 0x800000000 64bit pref]
[    2.191165] pci 0000:0b:00.0: BAR 1: trying firmware assignment [mem 0xd4901c0800000000-0xd4901c0fffffffff 64bit pref]
[    2.191168] pci 0000:0b:00.0: BAR 1: [mem 0xd4901c0800000000-0xd4901c0fffffffff 64bit pref] conflicts with PCI mem [mem 0x00000000-0xfffffffffff]
[    2.191171] pci 0000:0b:00.0: BAR 1: failed to assign [mem size 0x800000000 64bit pref]
[    2.191175] pci 0000:0b:00.0: BAR 8: no space for [mem size 0x1000000000 64bit pref]
[    2.191178] pci 0000:0b:00.0: BAR 8: failed to assign [mem size 0x1000000000 64bit pref]
[    2.191182] pci 0000:0b:00.0: BAR 10: no space for [mem size 0x40000000 64bit pref]
[    2.191185] pci 0000:0b:00.0: BAR 10: failed to assign [mem size 0x40000000 64bit pref]
[    4.671455] nouveau 0000:0b:00.0: unknown chipset (b72000a1)
[    4.671586] nouveau: probe of 0000:0b:00.0 failed with error -12
NVRM: BAR1 is 0M @ 0x0 (PCI:0000:0b:00.0)
[   11.180010] nvidia: probe of 0000:0b:00.0 failed with error -1Linux infomation:uname: Linux localhost.localdomain 3.10.0-957.el7.x86_64 #1 SMP Thu Oct 4 20:48:51 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux
Red Hat Enterprise Linux Server release 7.6 (Maipo)nvidia-bug-report.log is attachmented.
nvidia-bug-report.log.gz (226.0 KB)It’s been bothering me for a few days, looking forward to your answer.Obviously there is a pci resource allocation problem.Your BIOS is from 2018, did you check for an updated version?You turned pci realloc off, so I have to assume pci=realloc didn’t help?Did you try a different pci slot?Powered by Discourse, best viewed with JavaScript enabled"
13,535-doesnt-work-on-6-2-0-26-generic,"What was claimed as being solved in 530 doesn't work on ubuntu 23.04! does NOT solve anything. I install using Ubuntu “Addition Drivers”:
image1698×1149 156 KBWTF is happening!?! I have not been able to use external monitor for the past 2 fxxking months!Please run nvidia-bug-report.sh as root and attach the resulting file here.nvidia-bug-report.log.gz (121.4 KB)It looks to me you are running a wayland session. Which leaves no logging entries in the report. The last xorg log is almost 2 months old.
But however…
The driver compiled just fine. It just does not get loaded.
There are apparmor log entries, which seem to suggest, that the driver is trying to load:[    3.380903] audit: type=1400 audit(1691299776.831:8): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“nvidia_modprobe” pid=714 comm=“apparmor_parser”
[    3.380906] audit: type=1400 audit(1691299776.831:9): apparmor=“STATUS” operation=“profile_load” profile=“unconfined” name=“nvidia_modprobe//kmod” pid=714 comm=“apparmor_parser”There are log entries from dmesg, which report modules not loading because they are not signed, because you have secure boot enabled.[   15.751959] Loading of module with unavailable key is rejectedUnfortunately they don’t tell us which modules did not load.Could you run sudo modprobe -vvv nvidia and post the output.
After that could you turn of secure boot in the UEFI BIOS and see if that changes things?I’m seeing the same issue on Ubuntu 22.04 and here is what sudo modprobe -vvv nvidia returns:$ sudo modprobe -vvv nvidia
modprobe: INFO: …/libkmod/libkmod.c:367 kmod_set_log_fn() custom logging function 0x55fc6d00ab30 registered
modprobe: DEBUG: …/libkmod/libkmod-index.c:757 index_mm_open() file=/lib/modules/6.2.0-26-generic/modules.dep.bin
modprobe: DEBUG: …/libkmod/libkmod-index.c:757 index_mm_open() file=/lib/modules/6.2.0-26-generic/modules.alias.bin
modprobe: DEBUG: …/libkmod/libkmod-index.c:757 index_mm_open() file=/lib/modules/6.2.0-26-generic/modules.symbols.bin
modprobe: DEBUG: …/libkmod/libkmod-index.c:757 index_mm_open() file=/lib/modules/6.2.0-26-generic/modules.builtin.alias.bin
modprobe: DEBUG: …/libkmod/libkmod-index.c:757 index_mm_open() file=/lib/modules/6.2.0-26-generic/modules.builtin.bin
modprobe: DEBUG: …/libkmod/libkmod-module.c:579 kmod_module_new_from_lookup() input alias=nvidia, normalized=nvidia
modprobe: DEBUG: …/libkmod/libkmod.c:597 kmod_search_moddep() use mmaped index ‘modules.dep’ modname=nvidia
modprobe: DEBUG: …/libkmod/libkmod.c:405 kmod_pool_get_module() get module name=‘nvidia’ found=(nil)
modprobe: DEBUG: …/libkmod/libkmod.c:413 kmod_pool_add_module() add 0x55fc6ef57170 key=‘nvidia’
modprobe: DEBUG: …/libkmod/libkmod.c:405 kmod_pool_get_module() get module name=‘drm’ found=(nil)
modprobe: DEBUG: …/libkmod/libkmod.c:405 kmod_pool_get_module() get module name=‘drm’ found=(nil)
modprobe: DEBUG: …/libkmod/libkmod.c:413 kmod_pool_add_module() add 0x55fc6ef57250 key=‘drm’
modprobe: DEBUG: …/libkmod/libkmod-module.c:196 kmod_module_parse_depline() add dep: /lib/modules/6.2.0-26-generic/kernel/drivers/gpu/drm/drm.ko
modprobe: DEBUG: …/libkmod/libkmod-module.c:202 kmod_module_parse_depline() 1 dependencies for nvidia
modprobe: DEBUG: …/libkmod/libkmod-module.c:584 kmod_module_new_from_lookup() lookup=nvidia found=1
modprobe: DEBUG: …/libkmod/libkmod.c:502 lookup_builtin_file() use mmaped index ‘modules.builtin’ modname=nvidia
modprobe: DEBUG: …/libkmod/libkmod-module.c:1817 kmod_module_get_initstate() could not open ‘/sys/module/nvidia/initstate’: No such file or directory
modprobe: DEBUG: …/libkmod/libkmod-module.c:1827 kmod_module_get_initstate() could not open ‘/sys/module/nvidia’: No such file or directory
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_pcsp mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=cx88_alsa mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_atiixp_modem mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_intel8x0m mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_via82xx_modem mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=bt87x mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=cx88_alsa mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=saa7134_alsa mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_atiixp_modem mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_intel8x0m mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_via82xx_modem mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_audio mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_caiaq mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_ua101 mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_us122l mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_usx2y mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_cmipci mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_pcsp mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_audio mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nouveau mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia_drm mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia_drm mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=bonding mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=dummy mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=vt mod->name=drm mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1373 kmod_module_probe_insert_module() Ignoring module ‘drm’: already loaded
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_pcsp mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=cx88_alsa mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_atiixp_modem mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_intel8x0m mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_via82xx_modem mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=bt87x mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=cx88_alsa mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=saa7134_alsa mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_atiixp_modem mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_intel8x0m mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_via82xx_modem mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_audio mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_caiaq mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_ua101 mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_us122l mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_usx2y mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_cmipci mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_pcsp mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=snd_usb_audio mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nouveau mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia_drm mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia_drm mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=nvidia mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1466 kmod_module_get_options() passed = modname=nvidia mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=bonding mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=dummy mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1461 kmod_module_get_options() modname=vt mod->name=nvidia mod->alias=(null)
modprobe: DEBUG: …/libkmod/libkmod-module.c:1817 kmod_module_get_initstate() could not open ‘/sys/module/nvidia/initstate’: No such file or directory
modprobe: DEBUG: …/libkmod/libkmod-module.c:1827 kmod_module_get_initstate() could not open ‘/sys/module/nvidia’: No such file or directory
modprobe: DEBUG: …/libkmod/libkmod-module.c:802 kmod_module_get_path() name=‘nvidia’ path=‘/lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko’
modprobe: DEBUG: …/libkmod/libkmod-module.c:802 kmod_module_get_path() name=‘nvidia’ path=‘/lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko’
insmod /lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko “NVreg_DynamicPowerManagement=0x02”
modprobe: DEBUG: …/libkmod/libkmod-module.c:802 kmod_module_get_path() name=‘nvidia’ path=‘/lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko’
modprobe: INFO: …/libkmod/libkmod-module.c:949 kmod_module_insert_module() Failed to insert module ‘/lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko’: Key was rejected by service
modprobe: ERROR: could not insert ‘nvidia’: Key was rejected by service
modprobe: DEBUG: …/libkmod/libkmod-module.c:469 kmod_module_unref() kmod_module 0x55fc6ef57170 released
modprobe: DEBUG: …/libkmod/libkmod.c:421 kmod_pool_del_module() del 0x55fc6ef57170 key=‘nvidia’
modprobe: DEBUG: …/libkmod/libkmod-module.c:469 kmod_module_unref() kmod_module 0x55fc6ef57250 released
modprobe: DEBUG: …/libkmod/libkmod.c:421 kmod_pool_del_module() del 0x55fc6ef57250 key=‘drm’
modprobe: INFO: …/libkmod/libkmod.c:334 kmod_unref() context 0x55fc6ef56490 releasedDon’t intend to turn off secure bootjust for testingmodprobe: INFO: …/libkmod/libkmod-module.c:949 kmod_module_insert_module() Failed to insert module ‘/lib/modules/6.2.0-26-generic/updates/dkms/nvidia.ko’: Key was rejected by service
modprobe: ERROR: could not insert ‘nvidia’: Key was rejected by servicePowered by Discourse, best viewed with JavaScript enabled"
14,nvidia-prime-badvalue-integer-parameter-out-of-range-for-operation,"This is a Schenker Compact 15 (2019 model) with an RTX 2070 and a 4K OLED screen (based on a Clevo barebone PB51RF).The system is running FreeBSD 13.2-STABLE (stable/13-n255602-e6c1e181ba7f) running:Xorg server 21.1.8
NVIDIA driver 525.116.03The OLED is connected to the internal intel GPU (according to the vendor, because the NVIDIA GPU cannot drive the OLED screen brightness PWM, which sounds like a bullshit reason to me), which is using the modesetting driver.I want to use the NVIDIA GPU as the primary driver and output to the internal screen via PRIME unfortunately an xrandr --setprovideroutputsource command involving the NVIDIA GPU fails:nvidia-bug-report.log.gz (49.6 KB)I retried with nvidia-driver-535.54.03, got exactly the same behaviour.I repeated the exercise with nvidia-driver-535.86.05 on FreeBSD 13.2-STABLE stable/13-n255881-8557b8ba15b9, same results.The NVIDIA driver does not advertise the Source/Sink Output capabilities, I assume this is the problem?Powered by Discourse, best viewed with JavaScript enabled"
15,failed-to-apply-atomic-modeset-display-hang-on-fullscreen-game-launch-with-530-41-03-1070-gtx-wayland-gnome-43-4-manjaro,"I’m on Manjaro’s stable branch, which recently updated its Nvidia driver to the 530 series. Ever since then my system hangs whenever many (not all) fullscreen games launch. The display stops updating altogether, and input doesn’t affect the screen (though as far as I can tell, input is still being handled - see below). I can’t tell if this issue is caused by the driver or something further up the stack, so I’m starting here.When these hangs happen, I can press ctrl+alt+F3 to switch to tty3 and login, and see the game process and whatever else still running in htop. I can see recent errors with journalctl -b, and one line appears consistently in red right around the time the hang happens:kernel: [drm:nv_drm_atomic_commit [nvidia_drm]] ERROR [nvidia-drm] [GPU ID 0x00000100] Failed to apply atomic modeset. Error code: -22Killing the game process from tty3 doesn’t restore display responsiveness. Killing the gnome-shell process closes the Gnome session and returns me to tty1, and then I see the first rendered frame of the gdm login screen but it has also become unresponsive. So I’m stuck switching back to tty3 and rebooting.The first game I ran into this with was Satisfactory, launched from Steam and running atop their whole proton/dxvk stack. The game renders via DX12 by default, but when I switched it to Vulkan, it launched without hanging. No Man’s Sky, another game that uses Vulkan, runs with no issues.At first I thought it might be a Steam / Proton issue, but then I tried launching GZDoom, a Linux-native non-Steam game that supports both Vulkan and OpenGL. Launching GZDoom fullscreen caused the same hang. When I set it to launch windowed, it did not hang. And from within the windowed application, I could set it in and out of fullscreen mode without hanging. So the specific combination of starting the game / creating the window + going fullscreen may be a key feature of this issue.As far as the Wayland side of my config, I followed the standard steps for enabling a Gnome Wayland session on my system, and definitely have the nvidia-drm.modeset=1 kernel paramter set. Firefox is running in Wayland with no issues so far. All the games I tried were running via Xwayland, of course. In general I can’t really think of anything about my config that is customized or non-standard.Wish I could help, but I have the same issue, same error code. Running Arch 6.2.9. Nvidia 530.41.03.x11 is fine, Wayland freezes on full screen Doom Eternal, but I can hear the music playing and mouse seems to be touching some of the menu options, but only way out is to do a hard reset. Other games like Cultist Simulator do not freeze.=/I have the same issue, fullscreen games just freeze the screen, but i still hear sounds. Im on arch, latest driver and using Hyprland.I’m trying to investigate this a bit more deeply since it seems very much like it could be a driver-or-library-level bug. A couple findings:Further digging, I found this Xwayland bug report that has the right things in common (Nvidia 530 + Xwayland + fullscreen = hangs requiring full session restart):After upgrading to Xwayland 23.1.0 I no longer can launch some fullscreen apps (e.g. ETS2 game from Steam using built-in Proton ). When I launch such app Xwayland...I’ll keep an eye on that thread and report back here if it turns out it was a bug in Xwayland.Some developments from that xwayland thread: it looks like, in Gnome at least, disabling direct scanout avoids the hang:After upgrading to Xwayland 23.1.0 I no longer can launch some fullscreen apps (e.g. ETS2 game from Steam using built-in Proton ). When I launch such app Xwayland...I still can’t tell if that makes it an Nvidia driver issue or something else. Another commenter there reports it fixed in Gnome 44, so maybe I’ll just use the disable direct scanout workaround for now and wait for the Arch repos to get that.I had been experiencing this issue too. Follow these instructions for a temporary fix:Downgrading your drivers sounds like more work. Did you try keeping 530 and just disabling direct scanout? That was a viable workaround for me; it avoided the hang with no apparent side effects. For anyone else coming to this thread, I’ll paste the steps given in that xwayland issue thread here:Note that you’ll have to do this again each time you reboot.how is this still an issue nvidia? it’s been 3 months and i still can’t open a fullscreen xwayland app without the whole driver crashing. the workaround above fixes that so at least you’ve got something to work with, fix this.Hi All,
I tried to reproduce issue locally on couple of test systems but no luck so far.HP OMEN by HP 25L Gaming Desktop GT15-0xxx + Ubuntu 22.04.1 LTS + kernel 5.19.0-46-generic + NVIDIA GeForce RTX 3080 + Driver 530.41.03 + GBT AORUS FI27Q-PDell Precision T7610 + Arch Linux + kernel 6.4.1-arch1-1 + NVIDIA GeForce GTX 1070 + Driver 530.41.03 + BenQ EL2870UI cross verified default for game Satisfactory and it is using DX12.
I also changed display mode to Full Screen mode and launched game multiple times.Can someone please check if issue persists with driver [535.54.03] and share nvidia bug report from repro state and also confirm the repro frequency.nvidia-bug-report.log.gz (266.7 KB)driver version 535.54.03arch linux 6.4.3.arch1-2, gtx 1060, iiyama g-master G2530HSUable to reproduce crash without issue.Thaks for sharing the logs, can you please confirm exact repro steps.
I will try the same on my setup.any fullscreen xwayland game or app i open will crash the driver leaving me unable to move my mouse, keyboard or even change tty’s. tested games = half life 1, ftl, system shock enhanced, cruelty squad, kenshi (sometimes?). all of these games work in windowed or if applied the workaround above in the thread. omega strikers for example doesn’t crash even when fullscreen because it’s an unreal engine game and as far as i know they introduced wayland implementation.after force-shutting down the pc journalctl says: Jul 16 22:38:10 arch kernel: [drm:nv_drm_atomic_commit [nvidia_drm]] ERROR [nvidia-drm] [GPU ID 0x00000100] Failed to apply atomic modeset.  Error code: -22seems to be fixed with 535.86.05-2.spoke too soon, keeps happening under certain circumstances. sometimes it crashes, sometimes it doesn’t.@hmpfkafka
Is it still happening as per the steps outlined by you earlier ?yup, except some games work and some don’t. for example dishonored, death to spies, thief gold work with 0 problems, but half life 1 and celeste crash the video driver.I am also still experiencing this on Arch, driver version 535.86.05, linux 6.4.2 with a GTX 1060. I can consistently reproduce this by opening DaVinci Resolve (which fullscreens).I have filed a bug internally 4218400 for tracking purpose.
However I am still struggling to achieve local repro.
Will try latest recommended steps  and update further on it.Installed fresh Manjaro Linux 23.0.0 on my test system and can reproduce issue locally where launching game “Satisfactory” in full screen mode completely hang display (black color).
However, when I switched to latest driver 535.86.05, I no longer reproduce issue while launching game “Satisfactory”.
I will try other games with latest driver 535.86.05 and update.@hmpfkafka
@silvermight
Is it possible for you to test “Satisfactory” game with latest driver and share test results.I tried another game DOOMEternal and was able to repro issue with driver 530.41.03.
However, when I upgraded it to 535.86.05, I am not seeing any display hang and game runs fine.@Orion-JM
Can you try with latest driver 535.86.05 and share test results.Powered by Discourse, best viewed with JavaScript enabled"
16,current-graphics-driver-releases,"Current releases
Current production branch release: 535.86.05 (x86_64)
Current new feature branch release: 530.41.03 (x86_64)
Current beta release: 535.43.02 (x86_64)Legacy releases
470.199.02 (x86_64) - GKxxx “Kepler” GPUs
390.157 (x86 / x86_64 / ARM) - GF1xx “Fermi” GPUs (*​)
340.108 (x86 / x86_64) - GeForce 8 and 9 series GPUs (*​)
304.137 (x86 / x86_64) - GeForce 6 and 7 series GPUs (*​)
173.14.39 (x86 / x86_64) - GeForce 5 series GPUs (*​)
96.43.23 (x86 / x86_64) - GeForce 2 through GeForce 4 series GPUs (*​)
71.86.15 (x86 / x86_64) - Riva TNT, TNT2, GeForce, and some GeForce 2 GPUs (*​)
(*​) These releases are no longer being maintained.  Please see Support timeframes for Unix legacy GPU releases for more details.Please see Appendix A of the README to determine which driver you need for your GPU.Powered by Discourse, best viewed with JavaScript enabled"
17,535-86-05-doesnt-enter-performance-speed-mode-on-wayland,"I have checked with command nvidia-smi, it runs only xorg in backgroud.Powered by Discourse, best viewed with JavaScript enabled"
18,hardware-cursor-is-not-working-on-wayland-drm-sessions,"[  239.300217] [drm] [nvidia-drm] [GPU ID 0x00002d00] Framebuffer memory not appropriate for scanoutOS: Arch Linux (Linux 6.4.7-arch1-2)
Drivers: 535.86.05Looking at the code for this, it looks like this happens if wlroots allocates a buffer in system memory and then tries to use it as the surface for the cursor. NVIDIA dGPUs can only display surfaces that are in video memory.Are there any plans for such support to be implemented ?
The hardware mouse cursor seems to bring out other issues in other wayland compositors(gamescope, kwin, the other wl-roots such as the sway and hyprland) Support for HW Mouse Cursor - WaylandPowered by Discourse, best viewed with JavaScript enabled"
19,multiple-cuda-rtx-vulkan-application-crashing-with-xid-13-109-errors,"Hello there this is a follow up post to my previous Control (The game) issue as I encounter similar issues with Metro Exodus (Linux native game) and Metro Exodus PC Enhanced Edition (Proton + VKD3D)Nov 26 11:34:25 z004 kernel: NVRM: Xid (PCI:0000:26:00): 109, pid=9664, name=MetroExodus.exe, Ch 00000056, errorString CTX SWITCH TIMEOUT, Info 0x34c027
Nov 26 11:34:21 z004 kernel: NVRM: Xid (PCI:0000:26:00): 13, pid=‘’, name=, Graphics Exception: ESR 0x5147b0=0x17000b 0x5147b4=0x0 0x5147a8=0xf812b60 0x5147ac=0x1104
Nov 26 11:34:21 z004 kernel: NVRM: Xid (PCI:0000:26:00): 13, pid=‘’, name=, Graphics SM Warp Exception on (GPC 2, TPC 0, SM 1): Illegal Instruction ParameterWhat is the root cause here?Driver: 525.53
CUDA: 12.0
GPU: RTX 3080Issue is still present with 525.60.11Nov 30 13:13:25 z004 kernel: NVRM: GPU at PCI:0000:26:00: GPU-6f98b267-20cc-5347-51dc-8bad07fd2ad0
Nov 30 13:13:25 z004 kernel: NVRM: Xid (PCI:0000:26:00): 13, pid=‘’, name=, Graphics SM Warp Exception on (GPC 2, TPC 0, SM 0): Illegal Instruction Parameter
Nov 30 13:13:25 z004 kernel: NVRM: Xid (PCI:0000:26:00): 13, pid=‘’, name=, Graphics Exception: ESR 0x514730=0x1b000b 0x514734=0x0 0x514728=0xf812b60 0x51472c=0x1104
Nov 30 13:13:29 z004 kernel: NVRM: Xid (PCI:0000:26:00): 109, pid=22407, name=MetroExodus.exe, Ch 0000004e, errorString CTX SWITCH TIMEOUT, Info 0x17c027DE: Gnome 43.1 running on Wayland
Distro: openSUSE MicroOS
Driver: 525.60.11
CUDA: 12.0
Proton: 7.0-4
VKD3D: 2.6.0
Vulkan: 1.3.224
Flatpak Runntime: 22.08
(Running Steam via Flatpak)I am getting this issue as well with Metro Exodus and the 525.60.11 drivers. It used to work fine on the 520 series.Similar logs to what @Vortex_Acherontic posted:Distro: Arch Linux
Kernel: 6.0.10.arch2-1
Xorg: 21.1.4-1
DE: Gnome 43.1 in X11
Driver: 525.60.11
Proton ExperimentalSame issue for allot of people…[Mon Dec 19 12:53:43 2022] NVRM: GPU at PCI:0000:01:00: GPU-788f1619-c663-fb6f-56d4-f0e39b292db1
[Mon Dec 19 12:53:43 2022] NVRM: Xid (PCI:0000:01:00): 13, pid=‘’, name=, Graphics SM Warp Exception on (GPC 2, TPC 0, SM 1): Illegal Instruction Parameter
[Mon Dec 19 12:53:43 2022] NVRM: Xid (PCI:0000:01:00): 13, pid=‘’, name=, Graphics Exception: ESR 0x5147b0=0xc000b 0x5147b4=0x0 0x5147a8=0xf812b60 0x5147ac=0x1104
[Mon Dec 19 12:53:47 2022] NVRM: Xid (PCI:0000:01:00): 109, pid=43868, name=MetroExodus.exe, Ch 000000be, errorString CTX SWITCH TIMEOUT, Info 0x50c05aDistro: Arch Linux
Kernel: 6.0.12-arch1-1
Xorg: 21.1.6-1KDE O
DE: KDE Plasma X11
Driver: 525.60.11
nvidia bug report attachednvidia-bug-report.log.gz (1.6 MB)525.78, not fixedI’m getting something similar on 525.78 in Arch:NVRM: Xid (PCI:0000:42:00): 109, pid=1185, name=Renderer, Ch 00000010, errorString CTX SWITCH TIMEOUT, Info 0x2c004It consistently freezes my system for about 10-20 seconds whenever I launch a compute process with PyTorch. The last driver version that didn’t have this issue for me was 515.76.525.85.05 issue is present as well:nvidia-bug-report.log.gz (334.6 KB)I have filed a bug 3959156 internally for tracking purpose.
Shall try to reproduce issue locally and if needed any additional information, will get back.Hi All,
I tried playing game Metro Exodus (Linux native game) for around 30 minutes on couple of notebooks which have RTX 3070 Ti and RTX 2060 but could not observed any XID errors.
I would like to know repro frequency at your end and is there any other way also to reproduce issue consistently.The issue happens with the Windows version of Metro Exodus when it’s ran through Proton (the log says “name=MetroExodus.exe”). The Windows version runs much smoother so it’s better than the native. Before it worked almost fine except you had to disable hairworks (otherwise it freezes in intro), the rest was okay. Now it freezes on the title screen right before showing the main menu, the log reports the Xid errors as stated in posts above.My game settings are everything to max except Hairwork which I disabled.What I observed though is that this issue does not happen if you start Metro Exodus in safe-mode (after crash) or the first time post install and then set everything to max (except hairworks) and start playing without rebooting the game.It happens on the 2nd start after all settings have been turned up and the game was shut-down entirely.This however happens on both the native Metro Exodus and Metro Exodus PC Enhanced Edition via Proton and VKD3DPC Enhanced Edition Settings I get the crash with:Alight … I think I found the issue. For some unknown reason it’s the resolution.
Running the above settings but on 720p all is fine, setting my resolution to 1080p makes the game crash before the main menu on the next game start.My desktop config is two 1920x1080 (60Hz) displays which makes my primary resolution 1080p and can’t get higher.
So it may be the issue that setting the game resolution to the primary desktop resolution crashes it?Thanks for sharing the information, I am able to reproduce issue locally now and will keep posted on the same.Hi All,
Can you please try with driver 520.56.06 and share test results.Re-Doing the same task with 520.56.06 worked fine.In case it holds any valuable information I also attached the “bug-report” archive for 520.56.06 even though no bug seems to have happened:nvidia-bug-report_520.56.06.log.gz (294.4 KB)not sure if im hitting the same issue but. on a prime setup i getwhen i try to run diablo2 with median xl patches and GitHub - bolrog/d2dx: D2DX is a complete solution to make Diablo II run well on modern PCs, with high fps and better resolutions. so it in turn is a dx11 title  and running it fullscreen on an external monitor. windowed or even just running on the internal it works. but as fast as i try to run it fullscreen on the external monitor this Xid happends. and a reboot is required. this is on kwin 5.27 wayland, and nvidia 525.89.02, tried downgrading various things since i think this was working before. but didnt go as long back as 520.56.06 , it can occur with other various titles when trying to run them fullscreen on the external monitor in wine aswellyep managed to find an old archive of 520.56.06 and those runs the games just fine aswell. no Xid 56, but at the point of where it usually froze. it prints this to dmesg [drm:nv_drm_fence_context_create_ioctl [nvidia_drm]] ERROR [nvidia-drm] [GPU ID 0x00000100] Failed to allocate fence signaling event , if thats anything related or just an other issue that simply was fixed later.I’m experiencing a similar issue using an RTX 4090. Training runs with pytorch start fine but randomly fail anywhere from 1 to 10 hours into training, with the Xid 109 CTX SWITCH TIMEOUT error.
The difficult part is that I haven’t found a way to quickly reproduce the issue, it only occurs randomly, usually after an hour or so.Various configurations I’ve tested:
WSL
Native Ubuntu
Power Limiting GPU to 50%
Limiting memory usage to 50%Were you able to find a fix for this?Thanks for sharing the test results and it looks like you are no longer facing same issue with driver 520.56.06Thanks @gulafaran for sharing test results, you are no longer experiencing the original issue with driver 520.56.06.
However, you are seeing different error messages, can you please confirm if it’s consistent and you are seeing any performance drop or application crashing or any other functional issue.Powered by Discourse, best viewed with JavaScript enabled"
20,screen-flickering-on-535-86-05-x86-64-linux,"I have a been experiencing screen flickering on my secondary display after updating to Nvidia driver version 535.86.05.The last driver version I did not experience this on was 530.41.03.It’s important to note that I have two G-Sync enabled displays. I recall another similar issue happening on Windows 11 with a previous driver version. In that case, a special patch was made to address the issue.LG UltraGear - 27GL850-B (x2, G-Sync Enabled)2080 SuperNixOS 23.05 (x86_64-linux)We are aware of issue and team is actively working upon it.
We have already filed a bug 4164132 for tracking purpose.Powered by Discourse, best viewed with JavaScript enabled"
21,poor-halo-infinite-performance-and-random-hang,"We were able to root caused the issue, fix will be incorporated in future released driver.
Shall update once it is done publicly.I just tried driver 530.41.03 and the performance on my 2080 Ti is still bad, it feels just the same as with 525.
Is the fix already released? If not, is there a release target that you can share?I’m also experiencing this issue, on 530.41.03.When you said you could repro the issue, were you referring to the low framerate or the video freezes?The video freezes make the game completely unplayable, so that definitely needs fixed. I’m guessing there’s still no update on when this might be incorporated? You said you’d be putting it in a future update six months ago. That’s pretty wild, I’m not sure of any reason why Nvidia would just hold on to a bugfix like that.@gardotd426
We saw hang and crash issues on our local setups which has been already fixed and integrated in released drivers.
We also compared game performance in terms of FPS value and it’s the same what we observed with r520 branch drivers and fix driver.
If you are still facings issue on your setup, please share FPS value and reference video for same. Also let us know the FPS value for earlier working driver.@amrits I’ve never had a working driver, I didn’t get the game until I was already on 525 or 530.I’m not seeing fps issues, I’m seeing crashes before I can even get into a match, same issue as people were mentioning, video freezes and (outside of video) issues where the sound continues to play but the image is frozen, like in menus.That said, I can still try and get you a proton log and an Nvidia bug report log while attempting to run the game.@amrits With 535.54.03 and Proton Hotfix, I’m still seeing the freezing issue.Before I can even try to get into a game,  just going into the settings and trying to change any graphical settings, within like 30 seconds the screen freezes but the game is still active. Hitting Q and E still changes the settings category (I can hear the audio feedback from pressing the buttons).But the game picture is frozen, and never unfreezes.I get this Xid error when it happens:Unfortunately I am unable to reproduce this issue with Halo Infinite(the freeze), I had it on 520 and 525, but 530 and 535 no crashes, in addition VKD3D made changes to reduce crashes/freezes on nvidia gpus.Perhaps it could be related to different hardware, can you share specs + which kernel you use ?
Also that Xid error seems related to the multiple Xid error crashes which some people experience.Unfortunately I am unable to reproduce this issue with Halo Infinite(the freeze), I had it on 520 and 525, but 530 and 535 no crashes, in addition VKD3D made changes to reduce crashes/freezes on nvidia gpus.I’ve tried several kernels. Going back from when I first commented (so probably 6.3.5, 6.3.6, 6.3.7 of linux, linux-zen, and linux-tkg).My hardware is an EVGA XC3 Ultra RTX 3090.And I want to reiterate, 100% of my Halo infinite crashes are the exact “visuals freezing while input and audio continue to work” bug that was reported before I commented.Also that Xid error seems related to the multiple Xid error crashes which some people experience.It’s the only Halo Infinite Xid error I got, unfortunately.It also happens with all Proton versions, including Hotfix.Which Desktop Environment, maybe the window manager behaves differently which triggers the hang/freeze ?
Is it possible to try with gamescope and update with the results ?Huh? I’m on KDE, plus I wasn’t even the first one to report this literal exact same issue, that’s the whole reason I even commented on this thread, because that exact game hang was already being reported here.I can try with Gamescope but I don’t think that’s gonna make a difference, but I’ll still do it. I’ll post back here in a few.@kodatarule, okay so much for that, the game won’t even work at all with gamescope.I tried adding gamescope -W 2560 -w 2560 -H 1440 -h 1440 -b -e -- %command% (and I tried without the -- and with -f instead of -b) and no matter what either the game never launches, or it launches but the monitor just freezes with my desktop instead of showing the Halo Infinite window, like I can alt-tab into the window, but it’s just a frozen image of my desktop.Idk if I’m using the wrong launch options or not, with Lutris it’s just a matter of toggling on gamescope, I don’t have to do shit else. Any ideas?Never mind, too many launch arguments apparently, gamescope -H 1440 -f -- worked. Let me try to actually get into a match…Okay, well dammit…I actually got far enough to where I was able to matchmake, get into a match, get a kill in the first 30 seconds, then the game crashed.Before trying gamescope, just trying to go into the settings after launching to look at the graphics settings would end up with the video hang issue.And the crash wasn’t that issue either. The game just flat died. Like, the window closed out of nowhere, no error message, no hang, no nothing.sudo journalctl -b 0 | grep Xid gives no errors. When I get the gpu video hang, it ALWAYS gives a Xid error, literally 100% of the time.So, I didn’t hit that error, but I only really had the game running for like 6 minutes. So I’ll have to try again here in a bit. But it’s major progress, I’ve never gotten into a game before, I was able to do about 1 minute of training ONCE.That is very odd, I also use KDE and can’t reproduce it with just launching game + gamescope …
I wonder if it is related to this: Multiple CUDA/RTX/Vulkan application crashing with Xid (13,109) errors - #117 by gardotd426
Since 530 the game never froze for me as before(which was the issue reported here), however keep in mind that this game is a very mixed bag, even guys with amd have weird issues that others do not experience for example or hard to reproduce which makes debugging real hard.
since you mentioned Xid, I really think it is hitting that same exact issue, but I am uncertain perhaps amrits can give more details.Well like I said, the crash I got earlier when trying to run the game with gamescope was NOT a GPU issue. The game just died and I got no Xid error (but I always get a Xid error when the bug mentioned here occurs, literally in 100% of instances).I didn’t get to play long enough to say for sure that using gamescope prevents the bug from showing up, but it’s by far the longest I’ve ever had the game open, and the bug didn’t pop up, usually it pops up within 90 seconds. I’ll have to run the game some more later today.Is there any update on what seems to be causing the poor performance in Halo Infinite ? This is the only VKD3D title which performs considerably worse than how it is on AMD. In addition the GPU barely seems utilized getting around 60-70% with 40fpsThis seems to be different issue which is being tacked internally via bug 3959156 and below forum thread.Can you please confirm last working Nvidia driver where fps and GPU utilization was considerably high and what was their values.That doesn’t make a ton of sense, the behavior of the crash is literally identical to what was reported here, and not similar at all to what’s reported over there. It’s specific to Halo Infinite, and the game’s visuals freeze while the game itself is still running in the background (audio still works and I can still move the cursor and select menu items and the like). That’s not what is being reported over there.Hello,
The game always had issues with how it performs, in menus you can see somewhat “normal” gpu utilization with stable FPS, but once you get in game mostly Campaign and Big Team Battles for Multiplayer the performance dips hard.
Attaching a video which also showcases another problem related to the nvidia driver(later in the video you see some textures going pitch black) with this game.
Note: this is the only VKD3D title that performs this way.
Video has been recorded in native 1440p resolution, downscaled to 720p so that it fits the size to be uploaded here.
test23.tar.gz (98.8 MB)Powered by Discourse, best viewed with JavaScript enabled"
22,hardware-egl-not-working-on-wayland-libegl-warning-egl-failed-to-create-dri2-screen,"With 535.86.05 driver on Fedora 38 hardware EGL is not working on Wayland and EGL falls back to software:Readme mentions that EGL_EXT_platform_x11 is unsupported. Is falling back to software rendering the manifestation of that? Or is it a separate problem? Thanks.Powered by Discourse, best viewed with JavaScript enabled"
23,not-able-to-install-nvidia-drivers-on-ubuntu-server-22-04,"We had a Tesla T4 up and running smoothly on our server PowerEdge R640 with Ubuntu Server 18.04. However, after we upgraded our systems to Ubuntu Server 22.04, NVIDIA is not working. The command nvidia-smi outputs the following:NVIDIA-SMI has failed because it couldn’t communicate with the NVIDIA driver.After we purge everything, and re-install (multiple times), the server seems to get into boot-loop. The following lines are repeated a lot in kern.log:Jul 24 05:12:55 nc16 kernel: [327372.079138] nvidia-nvlink: Nvlink Core is being initialized, major device number 509
Jul 24 05:12:55 nc16 kernel: [327372.079145] NVRM: The NVIDIA probe routine was not called for 1 device(s).
Jul 24 05:12:55 nc16 kernel: [327372.089000] NVRM: This can occur when a driver such as:
Jul 24 05:12:55 nc16 kernel: [327372.089000] NVRM: nouveau, rivafb, nvidiafb or rivatv
Jul 24 05:12:55 nc16 kernel: [327372.089000] NVRM: was loaded and obtained ownership of the NVIDIA device(s).
Jul 24 05:12:55 nc16 kernel: [327372.089003] NVRM: Try unloading the conflicting kernel module (and/or
Jul 24 05:12:55 nc16 kernel: [327372.089003] NVRM: reconfigure your kernel without the conflicting
Jul 24 05:12:55 nc16 kernel: [327372.089003] NVRM: driver(s)), then try loading the NVIDIA kernel module
Jul 24 05:12:55 nc16 kernel: [327372.089003] NVRM: again.
Jul 24 05:12:55 nc16 kernel: [327372.089004] NVRM: No NVIDIA devices probed.However, nouveau is already blacklisted:File: /etc/modprobe.d/blacklist-nvidia-nouveau.confblacklist nouveau
options nouveau modeset=0File: /etc/default/grubGRUB_CMDLINE_LINUX_DEFAULT=“nouveau.blacklist=1 quiet splash rdblaclist=nouveau nomodeset”Here are also some outputs you might find informative:Kernel:Graphic Devices:Here is also the nvidia-bug-report prior to purging everything.nvidia-bug-report.log (488.4 KB)Thank you in advance for your help.@generix sorry to bather you. You seem to get a hold of these issues as your answers helped most of the people having similar problems. I tried a lot of other cases but nothing works. Could you please assist me?GRUB_CMDLINE_LINUX_DEFAULT=“nouveau.blacklist=1 quiet splash rdblaclist=nouveau nomodeset”typo: should be rd.blacklist=nouveau
also remove the nomodeset parameter.Thank you for your reply @Mart.I corrected the typo and removed the  nomodeset parameter. I then rebooted the system. I ran the following commands prior to installing the NVIDIA drivers:Both of which returned nothing. I then executed the following:From that point forward the system went on a boot-loop. Any other suggestions?I took a look at your bug report.
Looks like you used the .run file installer after a distro package was already installed.
That usually creates a mess.1: So use the same .run file again with the --uninstall parameter.
2: Purge the distro package you have installed with sudo apt purge.
3: Make sure you have the kernel headers installed. sudo apt install linux-headers-$(uname -r).
4: Do apt search nvidia-driver to get a list of available drivers.
5: Install your choice (version 5.525 and above are current versions) with sudo apt install DRIVER_VERSION.I prefer to use apt, as it gives you an output with information to work on.Thank you again @Mart.I followed your instructions but no luck.I first tried to execute the .run file with the --uninstall parameter but got the message:There is no NVIDIA driver currently installed.I then executed the following:I then updated the kernel $sudo apt install linux-headers-$(uname -r).And then I run $apt search nvidia-driver, which gave me a lot of options:nvidia-driver-535/unknown,now 535.54.03-0ubuntu1 amd64 [installed]
NVIDIA driver metapackagenvidia-driver-535-open/jammy 535.86.05-0ubuntu0~gpu22.04.1 amd64
NVIDIA driver (open kernel) metapackagenvidia-driver-535-server/jammy-updates,jammy-security 535.54.03-0ubuntu0.22.04.1 amd64
NVIDIA Server Driver metapackagenvidia-driver-535-server-open/jammy-updates,jammy-security 535.54.03-0ubuntu0.22.04.1 amd64
NVIDIA driver (open kernel) metapackageI went with  but I went with nvidia-driver-535.After rebooting, I got another boot-loop of the following keep repeating:Because of the loop I couldn’t get into the server, so I restarted and booted the 5.15.0-76-generic instead of 5.15.0-78-generic. I created a new nvidia-bug-report.log (489.2 KB) which I attach here.Any clues on what is going on?None of those take into account the libnvidia* files.Unfortunately the bug report is not very helpful, because it seems persistent logging is not enabled with journald.Configure logs Persistent Storage in journald
Est. reading time: 2 minutes
Might help there.Also please show the output of dpkg -l |grep nvidiaAlso look for blacklist files:
grep nvidia /etc/modprobe.d/* /lib/modprobe.d/*nvidiafb should be blacklisted!
nvidia should not!Reboot and create a new report.I followed the instruction on the link you provided and set the storage as persistent in journald.The output of $dpkg -l | grep nvidia is:ii  libnvidia-cfg1-535:amd64              535.54.03-0ubuntu1                                   amd64        NVIDIA binary OpenGL/GLX configuration library
ii  libnvidia-common-535                  535.54.03-0ubuntu1                                   all          Shared files used by the NVIDIA libraries
ii  libnvidia-compute-535:amd64           535.54.03-0ubuntu1                                   amd64        NVIDIA libcompute package
ii  libnvidia-decode-535:amd64            535.54.03-0ubuntu1                                   amd64        NVIDIA Video Decoding runtime libraries
ii  libnvidia-encode-535:amd64            535.54.03-0ubuntu1                                   amd64        NVENC Video Encoding runtime library
ii  libnvidia-extra-535:amd64             535.54.03-0ubuntu1                                   amd64        Extra libraries for the NVIDIA driver
ii  libnvidia-fbc1-535:amd64              535.54.03-0ubuntu1                                   amd64        NVIDIA OpenGL-based Framebuffer Capture runtime library
ii  libnvidia-gl-535:amd64                535.54.03-0ubuntu1                                   amd64        NVIDIA OpenGL/GLX/EGL/GLES GLVND libraries and Vulkan ICD
ii  nvidia-compute-utils-535              535.54.03-0ubuntu1                                   amd64        NVIDIA compute utilities
ii  nvidia-dkms-535                       535.54.03-0ubuntu1                                   amd64        NVIDIA DKMS package
ii  nvidia-driver-535                     535.54.03-0ubuntu1                                   amd64        NVIDIA driver metapackage
ii  nvidia-kernel-common-535              535.54.03-0ubuntu1                                   amd64        Shared files used with the kernel module
ii  nvidia-kernel-source-535              535.54.03-0ubuntu1                                   amd64        NVIDIA kernel source package
ii  nvidia-prime                          0.8.17.1                                             all          Tools to enable NVIDIA’s Prime
ii  nvidia-settings                       535.54.03-0ubuntu1                                   amd64        Tool for configuring the NVIDIA graphics driver
ii  nvidia-utils-535                      535.54.03-0ubuntu1                                   amd64        NVIDIA driver support binaries
ii  screen-resolution-extra               0.18.2                                               all          Extension for the nvidia-settings control panel
ii  xserver-xorg-video-nvidia-535         535.54.03-0ubuntu1                                   amd64        NVIDIA binary Xorg driverAlso, $grep nvidia /etc/modprobe.d/* /lib/modprobe.d/* returned:/etc/modprobe.d/blacklist-framebuffer.conf:blacklist nvidiafbI created another nvidia-bug-report.log.gz (134.5 KB).Well the bug report is much more informative as before.Just to make sure you tried to boot into the …78 kernel before creating the report?
journalctl -b1 still shows the module conflict message.I’m sorry, maybe we barked the wrong tree.
I looked up the supported GPUs list of the driver and didn’t find the Tesla T4 there.Unix DriversDownload the English (US) Linux x64 (AMD64/EM64T) Display Driver for  Linux 64-bit systems. Released 2023.7.18But if you search for the T4 drivers, it gives you v460.
Updated last in 2021. So I guess that’s the driver download page mess, I read very often about.Documentation for NVIDIA® Datacenter Drivers.
Lists driver v535. So I guess that would be accurate.lspci shows the vfio-pci driver in use for the card.
Maybe that is interfering?
Could you try to disable the iommu and passthrough stuff please (remove all the non standard stuff)?
Edit /etc/default/grub and run sudo update-grub.Also I found this, which might be worth a try (after purging the currect driver with apt purge '*nvidia*'):Quickstart guide for installing NVIDIA® Drivers for Linux.I run the nvidia-bug-report from the ...76 kernel, since I cannot access the ...78 due to the boot-loop. I also tried entering with safety-boot but no luck.I don’t quite get what you are referring to here:lspci shows the vfio-pci driver in use for the card.
Maybe that is interfering?
Could you try to disable the iommu and passthrough stuff please (remove all the non standard stuff)?
Edit /etc/default/grub and run sudo update-grub.In the /etc/default/grub there is the line:GRUB_CMDLINE_LINUX=""console=tty1 console=ttyS1,115200n8 consoleblank=0 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 vfio-pci.ids=10de:1eb8""In which, to disable the iommu I set it to intel_iommu=off. The $sudo upgrade-grub gives the following:Sourcing file /etc/default/grub' Sourcing file /etc/default/grub.d/50-curtin-settings.cfg’
Sourcing file `/etc/default/grub.d/init-select.cfg’
Generating grub configuration file …
Found linux image: /boot/vmlinuz-5.15.0-78-generic
Found initrd image: /boot/initrd.img-5.15.0-78-generic
Found linux image: /boot/vmlinuz-5.15.0-76-generic
Found initrd image: /boot/initrd.img-5.15.0-76-generic
Warning: os-prober will not be executed to detect other bootable partitions.
Systems on them will not be added to the GRUB boot configuration.
Check GRUB_DISABLE_OS_PROBER documentation entry.
doneAfter updating the grub, I rebooted the machine, which once again went into boot-loop.Will purge the drivers and follow the NVIDIA Driver Installation Quickstart. However, this guide says it is for Ubuntu 16.04 and 18.04. I will attach the results here once I am done.I run the nvidia-bug-report from the ...76 kernel, since I cannot access the ...78 due to the boot-loop. I also tried entering with safety-boot but no luck.I meant try to boot into …78.
Then into …76 and create the report.
journal entries from the …78 kernel will show up in the report.“console=tty1 console=ttyS1,115200n8 consoleblank=0 intel_iommu=on vfio_iommu_type1.allow_unsafe_interrupts=1 vfio-pci.ids=10de:1eb8”For testing remove all of these (I don’t know about the console entries, but I must assume you had your reason to put them there. The iommo and vfio-pci parameters are for passthrough, guessing that is what you want to do…)
update-grub after that.
boot into 78. boot into 76 - create report.Will purge the drivers and follow the NVIDIA Driver Installation Quickstart. However, this guide says it is for Ubuntu 16.04 and 18.04. I will attach the results here once I am done.Only guessing, that the documentation maybe is not up to date.Hey @Mart,I removed the parameters in the /etc/default/grub as discussed and not only did it boot to 5.15.0-78-generic but also the $nvidia-smi works fine.I don’t quite get why this happened though. I also did another reboot just to make sure.Thank you very much for your help.Powered by Discourse, best viewed with JavaScript enabled"
24,the-flicker-returns-535-54-03-driver,"Previously on 530 there was an odd flicker that would happen at the top of my screens. It’s back in 535.54.03. While it’s not as bad it’s still annoying when it happens.Three recent different threads about this issue:And this topic as well which I posted almost three weeks ago and which was neglected by everyone here since testing beta drivers is so above us:The previously mentioned threads are for 530, except the topmost. Comically (or sadly) I searched for new reports before posting but all it pulled up was my original report for the 530 drivers and a few others also for 530. The modeset “trick” no longer works but I’m “glad” to see I’m not the only one having this again.Can confirm, running KDE Neon 5.27.6 using the 535.54.03 drivers, I have the flicker at the top of the screen. Running an RTX 2070S with a 60Hz 4k monitor.Yup, it’s indeed back :(Hello all. I have the same issue with the following settings:
NVIDIA GeForce RTX 4080 GPU/PCIe/SSE2
Graphic Platform X11
kernel 6.4.0.
modest Y
DP-0 connected primary 2560x1600+0+0 (normal left inverted right x axis y axis) 344mm x 215mm
535.54.03The hardware is a Lenovo Legion Pro 7 16IRX8H laptop running Ubuntu 23.04.
With the 515 driver series, this was not occurring. I’ve noticed that flickering appears only on top of the screen.
PS, it started appearing with 535.x series (even on previous beta drivers)I am also experiencing a steady rate of intermittent flickering once every 15-30 seconds using proprietary Nvidia drivers.Nvidia Driver Version: 535.54.03GPU: GeForce GTX 1650Screen Resolution: 2560x1440 @ 144Hz refresh rateOS: Arch Linux Kernel 6.1.37-1-ltsDesktop: Gnome 44.2 & GDM 44.1 with X11 (X Server Windowing System)This wasn’t an issue prior to upgrading to 535.54.03. Hope they provide a fix soon.I don’t notice anything when playing games, everything is ok on the top screen as well. But the desktop (KDE NEON 22.04) does not run so smart anymore. There it did not before.Driver directly from the Ubuntu Repoitory 535.54.03
Nvidia GTX 4090
Resolution 5120x1440After fresh install of Fedora 38 everything was ok with default drivers…after installing both first NVIDIA 530, and then, 535 there was a random flicker in the top of the screen…in the game i didnt notice it though…i assume that it has to do with Xorg11 and wayland windowing system,i also use G-sync dell monitor with 165 hz refresh rate…ill put my whole hardware config here for more details just in case.Hi All,
I have seen flickering of entire screen on my setup locally and we are actively debugging the issue.
Bug 4164132 has been also raised for the same.Just an update (if it was needed) but the update 535.54.03 => 535.86.05 does not fix the issue.535.86.10 doesn’t fix the issue either.Powered by Discourse, best viewed with JavaScript enabled"
25,error-gpu-idling-display-engine-timed-out-since-524-x-and-linux-6-1-5,"Since both of these packages were updated on my system (EndeavourOS), my second monitor randomly freezes. It’s plugged in HDMI on a Lenovo Legion 5 (RTX 3060).
I’m also using the nvidia-dkms driver (525.89.02).This seems to be a known bug that was never addressed here.
https://bbs.archlinux.org/viewtopic.php?id=282669The only workaround is… downgrading both packages.Same issue here, both external monitors freeze randomly (seems somewhat related to when GPU/CPU is under heavy load). Levono ThinkPad P16 gen 1 and and ubuntu 22.04, driver version 525.85.12I’m on a lenovo ThinkPad P1 Gen 4i, same issue here, driver version 525.89.02, kernel 6.2.2@randamunanamae @linushn93 could you guys please share a log when this happen? Haven’t had this bug for a while.Just had this bug again ~8min ago while playing Diablo IV. Nothing to see in dmesg this time, but my external monitor is completely frozen.
nvidia-bug-report.log.gz (1.7 MB)We have seen similar error logs internally on few setups  and have been root caused as well.
I suspect it to be same issue, fix will be available in upcoming driver release.Continuing to experience this issue. Any updates on if a fix has been identified and what release it will go out with?Acer ConceptD Driver: 530.30.02  CUDA Version 12.1, NVIDIA GeForce RTX 3080 running Xorg.  I step away from my desk for more than 15 minutes and I come back to a frozen system.  Getting extremely frustrated.@amrits Would you take a look at this? Reported a few months ago, no response at all, but there’s a nvidia-bug-report log there.I think my bug is related to this one. Screen just stays black after startx and if I kill X (via SSH) then the same “Idling display engine timed out” line begins to appear in dmesg.I cannot upgrade my kernel any longer because the last working driver (520.56) doesn’t compile against newer kernels.I am still on 515.105.01 and can confirm this bug exists on this version, but only when i play on Steam.
So i was going to upgrade to 530 as @amrits said that this bug will be fixed, but it seems like it isnt yet, since someone after that post reported they are still experiencing these issues.Any idea which release this bug will be fixed in?Can someone please try with driver 535.54.03 and share test results. https://in.download.nvidia.com/XFree86/Linux-x86_64/535.54.03/NVIDIA-Linux-x86_64-535.54.03.run
If issue still persists, please share fresh nvidia bug report.I just had this bug again (external monitor freezing after launching a game). Here are the logs
nvidia-bug-report.log.gz (297.3 KB)Currently running on 535.86.05 (nvidia-open Arch package)One more bug report, this time my second monitor froze after I exited the game I executed with prime-run: nvidia-bug-report.log.gz (290.3 KB)Powered by Discourse, best viewed with JavaScript enabled"
26,plasma-wayland-resizing-windows-causes-performance-drop,"Hello,
When resizing windows(mostly QT ones such as dolphin, system settings, discover, etc) the entire desktop becomes sluggish and skips a few frames(note this issue is also observed on xorg).Powered by Discourse, best viewed with JavaScript enabled"
27,ubuntu-21-10-failed-to-grab-modeset-ownership-with-495-44,"Hi,I’ve recently installed a fresh copy of Ubuntu 21.10. I have a P5000.I’ve noticed many errors in demsg[10806.670226] [drm:nv_drm_master_set [nvidia_drm]] *ERROR* [nvidia-drm] [GPU ID 0x00000200] Failed to grab modeset ownership02:00.0 VGA compatible controller: NVIDIA Corporation GP104GL [Quadro P5000] (rev a1)
NVIDIA-SMI 495.44       Driver Version: 495.44       CUDA Version: 11.5Linux data 5.13.0-21-generic #21-Ubuntu SMP Tue Oct 19 08:59:28 UTC 2021 x86_64 x86_64 x86_64 GNU/LinuxDoes anyone know what could be causing it or how to t-shoot?ThanksI have just noticed this on kernel 5.14.1 on Ubuntu 21.04 as well. My guess is that if you install the mainline kernel 5.14.16 using the Ubuntu mainline GUI kernel installation tool (which installs kernels from the Ubuntu mainline kernel websote), then this might go away for you.Unfortunately, the dependency for this kernel is libc6 >= 2.34, which Ubuntu 21.10 has, but Ubuntu 21.04 is stuck on 2.33. I have a laptop on 21.10, I might check this tomorrow.Hi there, I checked on 5.14.16 kernel, and this issue does not exist on my Dell XPS with a GTX 1050 Ti Mobile on Ubuntu 21.10, so you can try this new kernel if you feel comfortable. Good luck.Hi,I upgraded to the latest Linux data 5.15.1-051501-generic #202111061036 SMP Sat Nov 6 14:39:56 UTC 2021 x86_64 x86_64 x86_64 GNU/LinuxBut I’m still seeing the errors. Google is not really showing up many results on what it could be.Hi,
@berglh   One comment: you pasted first few seconds of boot log. In case of “user28546”  the bug appeared at second 360. In my case is atso never occurs at the very beginning.One think that I can surely say that for me it occurs if and only if monitor (monitors, I use 3, not sure if that is relevant) is being woken for sleep.  I will try newer kernel, just saying that no errors in few first seconds of boor log are not indicative of whether this issue is there or not.I installed kernel 5.15.0-051500-generic,  I am running:and my dmesg contains:And of course I have nvidia-drm.modeset=1 set with the idea of using wayland.I was running 495.44 on my desktop machine on Ubuntu 21.04 and didn’t have this issue. I’ve just noticed it after upgrading my desktop machine with 2080 Super and 5.14.17 kernel. I’m not sure why I didn’t see this issue on my laptop, maybe it’s also related the type of GPU as well?
[drm:nv_drm_master_set [nvidia_drm]] *ERROR* [nvidia-drm] [GPU ID 0x00000600] Failed to grab modeset ownership@berglh One comment: you pasted first few seconds of boot log. In case of “user28546” the bug appeared at second 360. In my case is atso never occurs at the very beginning.I left the machine running for quite some time then grepped for items relating to nvidia and drm. That’s why it was only showing entries from the boot time.I am also seeing this on Gentoo. I have a GTX 970:I’m using nvidia-drivers 495.44 on Linux 5.15.1. As soon as I start X, I get the same error:I don’t know what kernel configs I need to set. Here’s what I have:And I have nvidia-drm.modeset=1 on the kernel command line.I’m also a Gentoo user with same problem here. I’m using linux kernel 5.10.76.I use OpenSuse Tumbleweed with Kernel 5.14.14-2-default, a GTX 960 and Nvidia driver version 470.86, and I’m having the same problem.Ubuntu 21.10GeForce GTX 1060 6GB5.13.0-21-generic470.82.00-0ubuntu0.21.10.1I would like to jump into this topic, too. Can we bump it as bug?I have similiar issues with Ubuntu 21.10 and Wayland, and this is a step to freeze my computer.After I resume computer from sleep, it gets freeze.I commented out section in nvidia-sleep.sh responsible to switch virtual terminal. After this and after resume I could see text Linux Kernel terminal and switch to other text terminals.However switching to graphical (Wayland session) causes computer to freeze.In dmesg logs I see above error.It quite nasty, as Wayland is getting more and more popular, and I see it looks better than X, however it looks it has issues with NVidia cards.I am getting this same issue on Archlinux with Nvidia 495.46. I am also getting sleep issues like @anon22950299I’ve made bit more investigations and it looks like Linux hangs only for graphics / terminal. I can still use SSH to log in there (however monitor does not work).I’m not most sure if above message  Failed to grab modeset ownership as I’ve seen it in logs and thing worked.However I can’t find anything in meaningful in logs related to this issue (even if it happens).All for now: it’s Nvidia drivers (not only 495) + Wayland + suspend to RAMWould be nice if NVidia dev could check it - I can make some more tests, and provide input if needed.Yeah I checked my old logs back when suspend worked and I was still seeing that Failed to grab modeset ownership message, so it might be unrelated?This Archlinux forum post seems to suggest that there’s issues with Xserver 21.1.2 and Nvidia 495.46: [SOLVED] 5.15 kernel: system frozen if suspending or hibernating twice / Kernel & Hardware / Arch Linux ForumsEDIT: @anon22950299 Found this other post suggesting that downgrading xserver to an older version solves the issue: [SOLVED] 5.15.8, something's off [not kernel problem] / Kernel & Hardware / Arch Linux ForumsHard to say, I think it’s hard to say something, below are my recent checks. All I can say it’s somehow related to Wayland and modset. I see that’s not uniquely related to Wayland and S3 power state, becouse switching to fbcon (when Wayland is running) is problematic, too.Maybe just one more interesting thing, sometimes when graphics hangs I see UEFI logo.And my recent findings, after starting kwin_wayland from cmd line, and switching back and forth fbcons, I see this in logsAfter switching back to waylandIn all cases everything hangs and I have to force close kwin_wayland with singal 9.I just want to say my “Failed to grab modeset ownership” message doesn’t appear anymore in 495.46.  As far as I am concerned the issue is resolved.[drm:drm_new_set_master [drm]] ERROR [nvidia-drm] [GPU ID 0x00000100] Failed to grab modeset ownership
This message does appear for me in 495.46 (in fact two at a time) (Optimus laptop with intel comet lake cpu and rtx 3060), but does not seem to cause any problems so I just ignore it.Powered by Discourse, best viewed with JavaScript enabled"
28,suspend-mode-doesnt-work-dead-by-someones-not-sure-whos-drivers,"guide doesnt apply.https://bugzilla.kernel.org/show_bug.cgi?id=217664Powered by Discourse, best viewed with JavaScript enabled"
29,how-to-directly-run-test-instead-of-nv-prime-render-offload-1-glx-vendor-library-name-nvidia-test,"how to directly run ./test, instead of __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia ./test
is there something can be added to the code, or CMake, or makefile?./test ;
sudo prime-select nvidia , then ./test
these 2 methods above both NOT work…working on Ubuntu, Thanks!Environment variables are a key aspect of Linux administration and provide engineers with a powerful tool for customizing systems. Learn how to use them.Thanks!
add ‘__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia’ to enviroment var is the only way?One way to put it into a script. i.e.Or just sudo prime-select nvidia.  reboot.
But then everything is generally rendered on the nvidia gpu.thanks! the reason is Ubuntu still cannot swith to Nvidia Gpu from intel gpu dynamically when exe start? even with CUDA installed and used in the exe?Powered by Discourse, best viewed with JavaScript enabled"
30,if-you-have-a-problem-please-read-this-first,"If you have a problem, and would like assistance, please follow these steps:Please always include a detailed description of the problem (both when starting a new thread and when posting to existing threads), as distinct problems can have nearly identical symptoms (e.g. black screens, hung X servers, …). Reliable reproduction steps are especially useful. If you post a reply reading “I have the same problem” in response to another user’s bug report without the information requested in this post, you may make it more difficult for NVIDIA to track and diagnose the problem.Please always include a copy of an nvidia-bug-report.log.gz file, which can be generated with the nvidia-bug-report.sh script shipped with the NVIDIA Linux/FreeBSD graphics drivers and installed in your PATH; the log file will be placed in the current working directory. Attach the log file by clicking the Upload  button in the post composition window.To make sure this log file includes as much relevant information as possible, please start the X server with startx -- -logverbose 6 and run nvidia-bug-report.sh after the problem has occurred. If X can not be started or the machine appears to have crashed, please check if you can log into it remotely (e.g. via ssh) and run nvidia-bug-report.sh in the remote shell, if possible.If the machine can not be logged into remotely, please run the bug report script with X running (this will ensure that data points only available when the device is initialized, such as the VBIOS revision, are captured in the log file). All requests for assistance from NVIDIA must include the bug report, per the instructions above.If nvidia-bug-report.sh appears to hang, it may still have collected enough useful information about your problem. In this case, please provide the partial log file generated, if any.In case of NVIDIA Linux graphics driver installation problems (when using one of the official .run installers), please attach the NVIDIA installer log file, /var/log/nvidia-installer.log.If you have collected additional information, but are not sure if it is relevant / appropriate, please attach it anyway.When creating a new thread, please make the thread subject as descriptive as possible. For example,This information will help us help you.Thanks!If you have a problem running an application using VDPAU, please run the following commands, then run the failing command again, and post the results:Please also generate and post an “nvidia bug report” by running nvidia-bug-report.sh as root.Please upload a copy of the media file you were playing. Even a short portion of the clip (e.g. truncated to include the first 5 seconds) should be enough for us to diagnose initialization problems at least. We now accept files using the NVIDIA file drop:The user ID is vdpau with no password (i.e. empty/blank). Simply upload files to whatever directory the system places you into. You will be able to upload files, and possibly list files, but not download files. Please let us know if you have any difficulties using this system.Finally, please include the version of mplayer you tested with.  You can determine this withIf you’re having problems with MPlayer, please try using the built-in software codecs, and see if the file plays correctly. To do this, use the same MPlayer command-line, but substitute the -vc parameter as follows:ffmpeg12vdpau → ffmpeg12
ffh264vdpau → ffh264
ffwmv3vdpau → ffwmv3
ffvc1vdpau → ffvc1e.g.:Some MPlayer problems may be solved by using a different demuxer; specify “-demuxer lavf” on the command-line.When possible, please file video playback, corruption, slowness, and other such bugs using MPlayer as the video player. If MPlayer and another VDPAU-enabled media player (such as Xine or MythTV) exhibit different behavior, please be sure to note that as well.Powered by Discourse, best viewed with JavaScript enabled"
31,gpu-has-fallen-off-the-bus,"The graphical card stops working during normal use. The frequency is about once a day. The problem happens randomly and usually only with Xorg and Firefox using the GPU and there is no intensive job running.When the problem happens, the system will get completely stuck in a few seconds, I cannot even ssh into it, and the only thing I can do is a hard reset.The system is stuck too fast so there’s no time to finish running nvidia-bug-report.sh. However, I managed to run nvidia-debugdump -D before the system is completely down, and I attached the output as dump.zip. I hope you can help me identify the problem.I also attached the result of nvidia-bug-report.sh when the system is normally operating to help you collect some information about the hardware.nvidia-bug-report.log.gz (650.2 KB)
dump.zip (471.5 KB)Powered by Discourse, best viewed with JavaScript enabled"
32,issues-with-nvidia-drivers-in-ubuntu-22-04-and-rtx4090,"nvidia-bug-report.log.gz (126.7 KB)Hello!:I have a desktop computer with Intel i9-13900 processor, ASUS Prime Z790-P Wifi motherboard and a NVIDIA GPU ZOTAC RTX 4090 TRINITY with UBUNTU 22.04 LTS as OS for using as a Deep Learning Computer.After several tries with driver 525 (my last attempt was with 525.105.17), there is an issue between the driver and Ubuntu Kernel (kernel is 5.19.0-40 generic) that makes impossible to the system complete the driver installation (installation breaks before completing)I tried with the drivers in Ubuntu Software Updates and the official one in Nvidia Drivers Download page ,without any success.I include in this message the .gz file obtained from running nvidia-bug-report.sh in the terminal.I would be very pleased if you could help me to solve the issue or give me some recommendations for completing the proper driver installation.Thanks in advance
FranciscoThe compiler is segfaulting and the kernel headers seem to be severely broken. There’s something really broken with your system, maybe check your system memory and reinstall.I have made some memory checks and everything is working properly inside the memory.
It seems anything related with a problem between the linux kernel and the driver, so I have installed a fresh Ububtu 20.04 LTS version (kernel 5.15.0-71-generic) and try to install the driver 525.105.17 without any success and an error message in terminal (attached you can find a screenshot of it)

Screenshot1024×768 348 KB
As you see in the screenshot, the resolution of the screen is low (I cant change it because of the problems with the driver), taking in account that I am using a 27"" screen.
Thanks for your help!
FranciscoI also tried with the new driver released yesterday (525.116.03) without success.
Screenshot_21024×768 259 KB
The file mentioned in the screenshot is attached to this message.Thanks a lot!
Francisconvidia-installer.log (3.2 KB)This installer log also shows crashes, although it doesn’t say what exactly is crashing. Does coredumpctl list anything relevant? Can you run gcc in a console without it crashing?You might need to apt install systemd-coredump and then try the install again in order for it to collect crash dump information.I cant execute coredumpctl: when I try to run apt install systemd-coredump in terminal I have this message:
Screenshot from 2023-04-30 22-32-301024×768 331 KB
, then I run sudo dpkg --configure -a in terminal and system stop in the line Building initial module for 5.15.0-71generic and then gets freezed (all gets stopped in the screen and mouse doesnt react to movements).This is something that happens for all versions of Ubuntu 20 and 22 and their respective kernels when I install the Nvidia driver (I have tried with 525.105.17, 525.89.02, 525.85.05, 525.78.01, 525.60.11 and 525.53).Regarding the gcc, I can run it in a terminal:
Screenshot from 2023-04-30 21-46-181024×768 389 KB
Thank you for your help!
Franciscoencounter the exact same issue, any progress here? how to resolve? thanks.I have the same issue with 525 and 535, are there any solutions?Downloading the run file didn’t help, GUI installation doesn’t work and the Terminal installation also doesn’t work.They all get hung up on building systems and then fail.I’m also having tons of issues trying to get drivers working for my 4090 on Ubuntu 22.04.Powered by Discourse, best viewed with JavaScript enabled"
33,flickering-at-the-top-of-the-screen,"Hi All,
I have seen flickering of entire screen on my setup locally and we are actively debugging the issue.
Bug 4164132 has been also raised for the same.Hello guys, i was one of the guys who created a Topic about this Black Flickering few month ago and even with the workaround with nvidia_drm.modeset=1 that could solve the issue for a while… the bug comes back with 535.54.03… atleast its not this annoying as few month ago but it still a pain to see it again :(I also removed today nvidia_drm.modeset=1 from grub but no changes.Nvidia Driver Version: 535.54.03GPU: GeForce GTX 2080TiScreen Resolution: 2560x1440 @ 144HzOS: Manjaro Linux Kernel 6.1.38-1-ltsDesktop: KDE with X11Can we PLEASE FOR THE LOVE OF GOD get a fix for this? I know it only affects Turing GPUs and it’s not a high priority but this is something that was working just fine and now it’s completely broken! This should have been fixed straight away! My distro doesn’t allow me to downgrade to older drivers and I’m at my wits end here.FOR THE LOVE OF THE (non-existing) GOD I’ve just downgraded drivers to version 525, what I recommend to all of you.But, of course, it’s weird, that there is no reaction from NVIDIA staff, and no fixes nor for v530 neither v535.Update: My bad, I see the reaction above. I hope they’ll fix it for v540. Let’s wait (and whine if it’ll not be fixed).Luckily with the power states set to performance mode I have this kind of flickers very rarely… I can bear it but I don’t want to imagine using my PC without this setting applied.I think that to certain people a constant flicker like this one could even cause headaches.Furthermore as said there were already reports months prior to my post here, pointing to some issue in the drivers.
The response from NVIDIA acknowledging this issue on daily PC usage, starting to debug it just one week ago is really bad from a market leader: they waited for every possible user with a Turing card and an high refresh monitor to have this issue before moving.This slow response caused the drivers to get pushed as stable on many repositories, without users being able to downgrade: NVIDIA’s site itself doesn’t allow to download 525 drivers anymore! and even when this will be fixed it will take some time to have it as a stable release on repositories.I hope this gets fixed soon and that it is just a one off: issues like this can’t be managed like it’s happening here.Even if NVIDIA site doesn’t allow you to download old versions of drivers, I remind you, that most of popular distros (like Arch) allow you to use archives of packages.Sure thing, searching around you can find the drivers in the archives and using the terminal you can install them, hopefully without troubles (and troubles are around the corner with this stuff).
The point is that a driver with issues like this one shouldn’t be pushed as stable but right now it is.just downgraded drivers to version 525Done the same here from a week. This time it is the best way, also so that some games no longer work.Done the same here from a week.I’ve looked for a reason for a month. I didn’t believe that such bug can be in official NVIDIA drivers. There were problems with GNOME upgrading/downgrading too… but then I’ve caught it in Plasma and Xcde.This is a MAJOR bug that didn’t exist before and it slipped right through to the official drivers which makes you wonder if Nvidia actually did a proper beta testing. It should have been fixed straight away and it’s been going on for months.Issue has been root caused, fix will be available in future driver releases.I’m testing driver 535.86.05 and it seems fixed for me.I don’t know why powermizer mode is setted to prefer maximum performance, even if right now I don’t have the command in my i3 config file, but even after I manually change it to Auto (so it changes to Adaptive) it seems fine.Just wanted to give an update after upgrading to the newly released 535.86.05 drivers. The issue still persists on my GTX 1650 GPU. Albeit the frequency of the flicker has reduced.Nvidia Driver: 535.86.05
GPU: GeForce GTX 1650
OS: Arch Linux
Kernel: 6.1.38-2-lts
GNOME Shell: 44.3
Windowing System: X11
Screen Resolution: 2560x1440 @ 144HzEdit: Spoke too soon. Now I see long flickers with the screen blacking out for nearly 3 seconds.The new 535.86.05 driver has mitigated the flickering problem, but the bug still exists - the monitor flickers from time to time, though not so often as before.GPU: GeForce RTX 2070
OS: CachyOS
Kernel: 6.4.4
Screen resolution: 3840x2160@60HzI can report that 535.86.05 did not fix the issue for me nor did it affect it’s frequency despite setting maximum performance in the nvidia settings.GPU: GeForce GTX 1650 Ti Mobile
OS: Linux Mint
Windowing System: X11
Screen Resolution: 3440x1440 @ 100Hz via thunderbolt to G-Sync external monitorSimilar flicker at the top of the screen here with MSI Gaming X 4060 Ti, Ryzen 5900x, Mint/Cinnamon 20.3, kernel 5.15.0-76, DP-connected HP and driver version 535.86.05. Enabling Nvidia’s fullscreen compositor “fixed” most of it, but not all.Thanks for sharing the feedback with latest released driver.
We are working on it actively for the root cause.Flicker at the top of the screen with driver 535.86.05-0ubuntu0.22.04.1.Ubuntu 22.04.2 LTS
Linux hal 5.19.0-50-generic #50-Ubuntu SMP PREEMPT_DYNAMIC Mon Jul 10 18:24:29 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
Monitor LG Electronics LG Ultra HD (DP-0) 3840x2160 at 60 Hz
NVIDIA GeForce RTX 2060With the new driver update, it’s even worse than before on my machine. 535.65.05 on 2080ti. Let’s hope it’s fixed soon.I am having the same problem with my new 4060 TI, however I am using Windows. Can you please tell me if the update to fix this bug will be released for Linux only or will it affect Windows as well?Powered by Discourse, best viewed with JavaScript enabled"
34,kubuntu-22-04-igpu-dgpu-driver-installation-procedure,"Dear all,I’d like to setup KUbuntu 22.04 on a desktop PC configured with:iGPU will be used for X11/graphics purpose instead dGPU for CUDA computational works.Looking for the web, I follow this procedureI set VGA priority  in this order: iGPU - PEG - PCIOnce ubuntu has been installed, I did the following steps:and then update kernel’ssudo update-initramfs -uwhere PCI id has been set in accord to lspci command.After this, I reboot the OS, X11 correctly started but when I try the command nvidia-smi, this raise the following error:
NVIDIA-SMI has failed because it couldn’t communicate with the NVIDIA driverThis procedure has been read from these links:Am I forgetting any step? Where am I wrong?Thanks,
NicolaDear All,after some troubles, I think I’ve solved.Here are all the steps for my configuration:The thing that let my system work, is using --m=kernel-open option.
More info on these links:then enable NVreg_OpenRmEnableUnsupportedGpus open kernel module option:Copy the following inside /etc/X11/xorg.confFrom this link, you can initialize NVIDIA GPU and keep it enable even if there isn’t any X11 instance connected to it; this is available thanks to nvidia persistenced daemon.Using systemctl, you can enable this daemon just creating this file inside /etc/systemd/system:and enable itCheck if everything works in this way: nvidia-smi
and the output should be:That’s all
NicolaPowered by Discourse, best viewed with JavaScript enabled"
35,rminitadapter-failed-0x241423-with-525-78-01-but-not-520-56-06-on-fedora-37,"Hardware is Dell Precision Mobile 5540.Same exact configuration works with 520.56.06.520.56.06:525.78.01:Same issue with 525.85.05.Could you manage to overcome the issue?Powered by Discourse, best viewed with JavaScript enabled"
36,black-screen-after-install-of-nvidia-driver-ubuntu,"I am trying to install nvidia-driver (440) on my Ubuntu on my laptop.After a lot of failed attempts to install drivers properly I followed this instruction, which seemed good: https://askubuntu.com/questions/1050423/cannot-get-nvidia-graphics-card-to-work-on-ubuntu-18-04Unfortunately, this doesn’t help. Even with the secure boot disabled I still got a black screen saying “/dev/sdb1: clean, 666666/14881488 files, 69696969/420420420 blocks” instead of normal lightdm user experience.The interesting part is: nvidia-smi actually shows some output and driver seems to be running (I forgot to write it down before purging nvidia again, sorry).Attached link to the nvidia-bug-report.sh output: https://drive.google.com/file/d/1NwsEw-yh2HPewAnjOyX_Y0Dj1fofCr8b/view?usp=sharingI am on Ubuntu 19.10, kernel 5.3.0-24.
I have acer predator helios 300 series laptop with GTX 1060 (GP106M [GeForce GTX 1060 Mobile]) and Intel(R) Core™ i7-7700HQ CPU @ 2.80GHz processor.Does anyone know how to fix this issue?I forgot to mention: I have dual boot with Windows 10 (on the first SSD) and Ubuntu (on the second SSD). Grub and everything is on the second SSD and BIOS is configured to boot from there first.Please follow this:Please follow this:Thanks, after completing the steps from the askubuntu thread (before reboot and skipping disable-nouveau part), I followed your instruction and now GUI seems to work fine.I caught strange issue when I was spontaneously logged out. If it continues, I’ll create another thread for fixing the issue.Getting spontaneous log-outs means the Xserver was crashing. Shouldn’t happen, so if it happens again please provide an nvidia-bug-report.log.rebootI have the same problem after install driver 440 :Wed Apr 22 17:35:57 2020
±----------------------------------------------------------------------------+
| NVIDIA-SMI 440.82       Driver Version: 440.82       CUDA Version: 10.2     |
|-------------------------------±---------------------±---------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce RTX 2060    Off  | 00000000:01:00.0 Off |                  N/A |
| 50%   41C    P0    24W / 170W |      0MiB /  5933MiB |      0%      Default |
±------------------------------±---------------------±---------------------+±----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
±----------------------------------------------------------------------------+I can use putty, but my server screen is black, I can no longer use it.sudo apt purge nvidia*
sudo apt autoremove --purge
sudo apt update && sudo apt full-upgradeIt’s OK I have my screen but after :sudo ubuntu-drivers autoinstall…Same problemPlease run nvidia-bug-report.sh as root and attach the resulting nvidia-bug-report.log.gz file to your post. You will have to rename the file ending to something else since the forum software doesn’t accept .gz files (nifty!).Ok thanks, I send my Log File.nvidia-bug-report.log (795.1 KB)Unfortunately, no config or Xorg log files included. Please run
find /etc/X11 /etc/X11/xorg.conf.d /usr/share/X11/xorg.conf.d -name ""*.conf""  -print -exec cat '{}' \; >allconfig.txt
and
sudo journalctl -b0 |grep “gdm-x-session” >gdm.log
and attach both output files.
Furthermore, you have also an intel gpu, which gpu is the monitor connected to?I’m sending you the Xorg journal, it’s a server version so I don’t have a gdm-session. The screen is connected to the RTX2060 card, the server startup appears on the screen, it is at the command prompt that I have a black screen.allconfig.log (7.0 KB)Ok, so you don’t run any xsession, just text console?
Please try setting the kernel parameter
nomodeset
to keep the intel driver from loading. if that doesn’t help, check if you can disable the igpu in bios.Congratulation.and it’s ok…ok next stape thanks a lot !I will have to use the card with tensorflow, some have chosen me said that arriving at this stage I will come back to see you ahahahahHello!I have the similar issue on lenovo legion laptop.
After login the black screen with Legion logo.
Wed May  6 15:00:50 2020
±----------------------------------------------------------------------------+
| NVIDIA-SMI 440.59       Driver Version: 440.59       CUDA Version: 10.2     |
|-------------------------------±---------------------±---------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 166…  Off  | 00000000:01:00.0  On |                  N/A |
| N/A   46C    P5    11W /  N/A |    268MiB /  5936MiB |      0%      Default |
±------------------------------±---------------------±---------------------+±----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|    0      1484      G   /usr/bin/gnome-shell                         215MiB |
|    0      2037      G   /usr/lib/xorg/Xorg                             8MiB |
±----------------------------------------------------------------------------+I’ve tried to set nomodeset. The result is the samewill be appreciated for the helpnvidia-bug-report.log (269.0 KB)Please remove the kernel parameter ‘nomodeset’, then runto find a file containingand change 1 to 0
then runand reboot.Thank you very much. Now it works.I have similar issue on MSI laptop WP65 with above.
After installing nvidia-440, i can’t boot just black screen with cursor.
here I attach the log file.
nvidia-bug-report.log (234.2 KB)Please remove ‘nomodeset’ kernel parameter.Thank you, that solved my problem.
But I have another issue of crashing on resume after suspend related to nvidia.
May I ask you to resolve this issue?
I attach the crash log.Please try kernel parameters
acpi_osi=! acpi_osi=“Windows 2009”Hello, i’m facing the same problemGTX 1660 tiI installed Ubuntu 20 or Linux Mint 20 and both do not start x, only with safe mode.
So I tried to install driver from file and do not work.nvidia-bug-report.log (689.9 KB)Can someone help me?Powered by Discourse, best viewed with JavaScript enabled"
37,converting-onnx-model-to-int8,"I am trying to convert an FP32 ONNX model to int8, which is used for detecting texts in images. However, it always went wrong at Int8Calibrator part. I am not sure where I got it wrong, could you tell me the error? Thanks!Environment:

Python Version: 3.8.8My code looks like this:
int8.py (2.0 KB)
The basic idea is:
Defining a function, build_engine, that does most of the work:
It sets up TensorRT, defining things like batch size, optimization profiles, and whether to use INT8 precision.
It then reads in the ONNX file and parses it to a format that TensorRT can use.
If the platform supports INT8 precision, it sets the network to use INT8 and sets up the calibrator.
It builds the TensorRT engine from the parsed ONNX file and saves it to disk.
Defining the main function that sets up the calibrator and calls build_engine to start the conversion process.Here is some basic information of my model:
Model Inputs:
x: Shape: [-1, 3, -1, -1], Type: 1
Model Outputs:
save_infer_model/scale_0.tmp_1: Shape: [-1, 1, -1, -1], Type: 1The error is:
[TRT] [E] 4: [standardEngineBuilder.cpp::initCalibrationParams::1460] Error Code 4: Internal Error (Calibration failure occurred with no scaling factors detected. This could be due to no int8 calibrator or insufficient custom scales for network layers. Please see int8 sample to setup calibration correctly.)
[TRT] [E] 2: [builder.cpp::buildSerializedNetwork::751] Error Code 2: Internal Error (Assertion engine != nullptr failed. )
Traceback (most recent call last):
File “int8.py”, line 61, in 
main()
File “int8.py”, line 57, in main
engine = build_engine(ONNX_FILE_PATH,Int8_calibrator)
File “int8.py”, line 42, in build_engine
f.write(engine)
TypeError: a bytes-like object is required, not ‘NoneType’I think the second error is caused by the first one, which is the error of the calibrator.In case if you need, I also append my model file here:
det.onnx (2.2 MB)
It is in the form of FP64, but it can be converted to FP32 automatically while running this code.Powered by Discourse, best viewed with JavaScript enabled"
38,linux-solaris-and-freebsd-driver-535-54-03-production-branch-release,"Release highlights since 535.43.02:Fixed a bug that caused modesets to fail in some Wayland configurations.Fixed a bug that caused head-mounted displays (HMDs) to display black after a modeset.Fixed a bug that prevented SLI Mosaic controls from being displayed in the nvidia-settings control panel when using GSP Firmware.Fixed a bug that could cause image corruption when unbinding Vulkan
sparse textures.[README | Linux x86_64 | Solaris | FreeBSD x86_64 | Kernel driver source]Powered by Discourse, best viewed with JavaScript enabled"
39,fedora-38-nvidia-driver-530-41-03,"Hello,
Updated different DELL Hardware (Workstation, Notebook) with NVIDIA cards (RTX4000, P3200) to driver version 530.41.03. All computers have the same problem now:How can I fix this behavior?Thanks and best regards,
ThomasHello @thomas.zellner and welcome to the NVIDIA developer forums.Did you disable the GUI AND unload all NVIDIA kernel modules before installing the new driver AND reboot immediately?You might still have incompatible driver “pieces” in your system.Boot into console mode, unload any and all NVIDIA modules, re-install and reboot.If that does not help, after module unloading, purge all NVIDIA drivers (I don’t know how to do that on Fedora though), reboot into console and re-install.Hope that will work for you!Hi Markus,
Thanks for your answer! I did some further tests today. I have the same issue with a new from scratch installed Fedora (the system has never seen an NVIDIA driver before). I am using the rpmfusion drivers.
Best regards,
TomOn that fresh install with the NVIDIA driver installed, can you call sudo nvidia-bug-report.sh and attach the result file here?What was your previous driver version and does the system work normally if you downgrade again?Thanks!nvidia-bug-report.log.gz (70.2 KB)I have the same problem, same driver version, same repository (rpmfusion) and same linux distro, I tested it on Fedora Workstation (gnome env) and Fedora spin with KDE (it is even worse there)We are in the process of migrating our Fedora workstations from version 36 to 38. The driver version 530.41.03 works properly with Fedora 36, so we don’t have an older version to test for Fedora 38.nvidia-bug-report.log (455.7 KB)@xSylla hello and welcome to the NVIDIA developer forums.Some of your issues might be attributed to the usage of Wayland. At the moment we still recommend to stay with XOrg instead. This message in your log is one inidicator:But in general the log info looks rather sparse and the only possible issue I see is that the driver taints the kernel, which might cause problems.But since my Fedora expertise is rather limited, I think I try and pull in some more eyes and move this topic to the Linux category.We have been using Wayland for a long time. We never saw such behavior with Fedora 36 in conjunction with NVIDIA and Wayland.Unfortunately same behavior with 535.54.03 😥NVIDIA does a pretty bad job supporting newer GNU/Linux technologies and they brag their drivers are more tested than AMD’s…
Rant done, simpledrm is enabled by default on fedora kernels and causes your extra monitor (use initcall_blacklist=simpledrm_platform_driver_init) to disable it. I believe they said nvidia is supporting this now, but it doesn’t seem the case, at least not with newest drivers.
Also, if using wayland, make sure nvidia-drm.modeset=1 is setWith the kernel command line “initcall_blacklist=simpledrm_platform_driver_init” the ghost display is gone (Thanks mmbossoni). But a second physical display wont work (is not recognized). Whether with or without the kernel command line. It’s a nightmare 😭 Same Hardware with Fedora 36 and nvidia 530.41.03 is working without any problem… Fedora 38 and nvidia 535.54.03 no chance.What kernel version are you using?I have a laptop (Acer Predator Helios 300 from 2019) with a GTX 1660 Ti, and it works fine with kernel 6.3.12. I’m using the Nvidia driver from rpmfusion, version 535.86.05.However, under kernel 6.4.6 and 6.4.7, the laptop’s built-in display is always black. I can plug an external monitor into the HDMI port and that works correctly. Gnome and xrandr do not recognize the built-in display.I just tried adding  initcall_blacklist=simpledrm_platform_driver_init and nvidia-drm.modeset=1 to the kernel command line. Everything worked without them on kernel 6.3.12. They didn’t help with kernel 6.4.7.Powered by Discourse, best viewed with JavaScript enabled"
40,cueglstreamproducerconnect-returns-error-801-on-525-53-driver,"It seems that the new beta driver is causing the cuEGLStreamProducerConnect CUDA function to return the error 'operation not supported' (801). I’ve not yet upgraded to the 525 driver to test this myself.The issue is happening with the nvidia-vaapi-driver, on this line, which is odd because that code has been working fine up to now.For reference, the nvidia-vaapi-driver issue is here.Regards
elFartoAs reported in the nvidia-vaapi-driver issue, this is still not fixed in 525.60.11. Are there plans on the fix?I’ve retested this with 525.60.11, and I’m still getting the same issue. I’ve tried a few things, but nothing will allow cuEGLStreamProducerConnect to succeed.Interestingly, if I remove the call to eglStreamImageConsumerConnectNVprior to the cuEGLStreamProducerConnect call, it correctly errors saying there are no consumer connected.@amrits Is this a know issue?Thanks & Regards
elFartoI saw some stuff in here about direct backend, unsure if this would help at all or is related, my understanding is not great but would like to help: cuEGLStreamProducerConnect returns error 801 on 525 series · Issue #414 · NVIDIA/open-gpu-kernel-modules · GitHubNo, the direct backend is a potential work around for the issue, as it does not use EGLStreams. It doesn’t solve the issue that EGLStream with CUDA is broken as of the 525 release.I have filed a bug 3893338 internally for tracking purpose.
Can someone share precise repro steps so that I can try locally on my setup to reproduce issue.I’ve whipped up a quick test case which reproduces the issue on my machine:It produces this output on my machine:Regards
elFarto@elFarto
Thanks for sharing the sample code, I am able to reproduce issue locally.
We will investigate on it and update.525.78.01 driver released and the issue is still there.We have root caused the issue successfully and fix will be incorporated in future released driver.with future release you mean 525.85.05?greetings530.30.02 beta driver released and the issue isn’t fixed.I can confirm that driver version 525.105.17 does NOT have the fix incorporated: it still has the same bug.One of the worst mistakes I’ve made was buying a GPU from NVIDIA, specifically the 3070. My desktop runs atrociously bad while the GPU is idling, and the CPU is at 100% usage. I’ve tried different distros and settings, but the problem remains. Even my laptop with an Intel iGPU runs better than my PC with a 3070. This thread really represents how NVIDIA treats their customers. This problem has persisted for literally months. In December, they acknowledged the problem, but it took them until late January to say “the fix will be incorporated in future released driver,” and the problem still remains. They clearly don’t care about their customers at all. And don’t get me started on how the VRAM on this GPU limits all the recent games.This issue is still present in 535.43.02.@amrits Is there any more information on which future driver release this fix will be in?@elFarto
Unfortunately, I will not be able to comment about exact release, but I have followed up with the team on the same.Still not in 535.86.05…Powered by Discourse, best viewed with JavaScript enabled"
41,diagonal-screen-tearing-since-525-78-01-thinkpad-p1-gen2-t2000,"Since updating the Nvidia driver to 5.25.78.01 I am experiencing a diagonal screen tearing on my external Monitor Thinkvision P27u running either via USB-C DP alt mode, HDMI or connected via Thunderbolt Workstation Dock Gen2 Display Port. Same issue with a or Dell S7271QS via HDMI or Display Port via Thunderbolt Workstation Dock Gen2.Notebook: Thinkpad P1 Gen2
The GPU is a T2000
OS: Fedora 37
Drivers not working so far: 525.78.01, 525.85.05, 525.89.02
Last driver working: 525.60.11I am experiencing the same issue with the nouveau drive as weel since day one. It is just the other diagonale and appears even for example when scrolling web sites, open new tabs, etc…Since Nvidia driver 525.78.01 the exact same problem appears.
The most easiest to reproduce the issue was to simply show the sleep/reboot/shutdown/log off screenVideo of the issue:
Anyone else experiencing the same issue?Nvidia bug report attached
nvidia-bug-report.log.gz (133.7 KB)I have same issue on my Optimus device. I have tearing problem while using XWayland applications on Wayland server with PRIME Render Offload. 520 drivers just works fine.Enabling Performance Mode and using Weston as compositor solves my issue for now.I am experiencing this issue with Xserver, because Wayland is so laggy that it is unusable with the nvidia driver@aplattner @amrits
any feedback from your side?Does setting “prefer maximum performance” in nvidia-settings change anything?Indeed, the tearing is gone.Now is the question, what was changed from 525.60.11 that caused this issue?Nevertheless, this can not be the solution to run the Nvidia Quadro T2000 all the time in performance mode. This is a portable machine.Any idea what causes the issue?@aplattner @amrits
I am still waiting for your feedback to this issueLooks like you are forcing us (University IT department) to completely switch from Nvidia CUDA.
We can not use it anyway when drivers are not working properly.I suspect this is a fallout from nvidia changing their clocking algorithm trying to mitigate high power consumption with multi-monitor setups (check the forum for posts from users complaining about it). For your setup, the memory clocks are likely now too low to provide the needed memory bandwidth/latency.
Instead of using max performance, you could check whether your gpu supports nvidia-smi -lgc to manually just set a higher minimum memory clock.
Edit: I meant nvidia-smi -lmc for memory clocks.I checked the change log of 525.78.01 and found the following:Fixed excess CPU usage in hybrid graphics configurations where an external display is connected to an NVIDIA discrete GPU and configured as a PRIME Display Offload sink (also known as “Reverse Prime”).Could be that this “fix” causes the new issue.
Surprisingly the problem also appears when not running in “Reverse Prime” but also in regular “Prime”.@amrits @aplattner
Could you please take care of this issue and fix it.
Even when scrolling in texts, this is really unusable and extremely distracting.
Don’t get me wrong, but the the Nvidia Quadro T2000 was a quite powerful  mobile graphic chips and by introducing this change, it turns into showing garbage, almost impossible to not get distracted from work with 3500$ machinesBtw.:
During experiencing massive screen tearing I checkedand did not see any signifigance differene in clockspeeds between driver versions 525.65.01 (no tearing) and 525.89.02 (massive tearing), but see for yourselfDriver 525.89.02

525.89.021920×2553 488 KB
Driver 515.65.01

515.65.011920×2553 456 KB
@fhortner
I have filed a bug 4004122 internally for tracking purpose.
I will check for similar hardware internally and try for local repro.
Can you please confirm if issue is only reproducible with dock connected?@amrits
Thanks for taking care.
Issue is reproducible also without dock connected, so completely independent from dock.I tried with a 4K monitor directly connected to laptop via HDMI or USB-C (so dock disconnected)
Also tried with a 4K monitor via Display Port with dock connected via thunderboltIn any cases massive tearing.@amrits
Could you find similar hardware to reproduce the issue?
(I remember you had a Thinkpad P1 Gen3 here: External Monitor not available after Suspend/Sleep - #32 by amrits)@amrits
2 Weeks later and still no reply.Could you find similar hardware to reproduce the issue?@fhortner
Apologize for the late response.
I tried on couple of Thinkpad notebooks (ThinkPad P1 Gen 3 and ThinkPad P1 Gen 5) but did not observe any flickering/tearing issue so far.
I will spend few more cycles on it and update.
Are you seeing this issue consistently or happen after certain amount of time post boot ?The issue is consistently on every boot, independent of time past after boot.BUT:
Reducing resolution to FullHD 1080p helps to reduce the issue
with monitors native resolution 4k the issue is much worse than with FullHDThe issue is best visible with changing gradients like opening the sleep/restart/shutdown dialog in KDE Plasma wih X11 (Wayland is so laggy that it is totally unusable)issue persists with driver version 530.30.02issue persists also with version 530.41.03issue still persists with version 525.105.17
but
issue still not there with version 515.105.01@amrits
could you please try the following:
The issue is best visible with changing gradients like opening the sleep/restart/shutdown dialog in KDE Plasma wih X11 (Wayland is so laggy that it is totally unusable) on an external 4k monitorUnbelievable, 2 months and still no reaction to my findings.Problem is still present with 535.43.02 Beta.@amrits
Do you now only focus on AI in the server field?
If the problem is not solved within the foreseeable future, we’ll dump all Nvidia hardware and switch to Intel. Seems like Nvidia is just useless in the Accademic area - Vienna University of Technology@fhortner
We do have local repro now further investigation.
Engineering team is currently debugging the issue.Powered by Discourse, best viewed with JavaScript enabled"
42,problemas-com-a-placa-de-video-geforce-rtx-3050-ubuntu-22-04-2-lts,"Olá, eu estou fazendo uma reclamação ao mesmo tempo que um pedido de ajuda.Meu computador roda Ubuntu 22.04.2 e utilizo uma placa de vídeo RTX Geforce 3050. É um Acer Nitro 5. Acontece que quando eu atualizo o sistema ele muda as configurações da placa e, ao reiniciar após a atualização do sistema a placa não aparece mais no “Sobre o sistema” das configurações do Ubuntu e o aplicativo NVIDIA X Server Settings se reduz ao mínimo em relação a configurações da placa em questão. Eu uso o driver metapackage nvidia-driver-535 como padrão e, mesmo assim, após a atualização ele não funciona. Fico na dependência apenas do processador Intel Core i7 11ª geração e memória ram de 8GB do próprio notebook. O que fazer para voltar a poder usar a minha placa de vídeo normalmente?No momento da atualização foi pedido que eu digitasse uma senha para usar na hora do reinício, para ativar a placa de vídeo, só que como o que apareceu na hora que eu reiniciei era estranho pra mim eu acabei entrando direto no Ubuntu mesmo, sem digitar senha nenhuma no momento da reinicialização. Isso desativou a placa. O que fazer? Obrigado desde já, Deus os abençoe.o aplicativo NVIDIA X Server Settings se reduz ao mínimo em relação a configurações da placa em questãoMe parece que você está usando Wayland.
echo $XDG_SESSION_TYPE e verifique. Você pode trocar para o X na tela de login.Powered by Discourse, best viewed with JavaScript enabled"
43,numerous-warnings-when-compiling-the-kernel-driver-package,"When compiling the driver package on Gentoo (x11-drivers/nvidia-drivers), a whole lot of warnings gets emitted by both GCC and Clang. When trying to match the CFLAGS for that specific package, that is the compiler flags for the non-Kbuild segment, with the compiler flags that Kbuild emits in order to work around CFI violation in rm_kernel_rmapi_op · Issue #439 · NVIDIA/open-gpu-kernel-modules · GitHub, some of the warnings get turned into errors, specifically a function declaration without a prototype is deprecated in all versions of C [-Wstrict-prototypes] at the very least. As I’m stuck on the proprietary kernel module due to having an MX230 dGPU, I’m reporting this here instead of in the open-gpu-kernel-modules repository.As there are way too many warnings to list them all here, I tried to upload the entire build log, but the forum returned an error after the upload seemingly completed, even when I tried it a second time. It wasn’t a useful error, just “Sorry, an error has occurred.”. The log is ~16MB in size in case that matters. I would prefer to upload the file directly to the forum, but I can use WeTransfer or another service if need be. I’ll wait for a response before moving forwards with an external file-sharing service though.Have a nice day!Edit: So, compressing the text file with gzip --best reduced the file size substantially — it was more than I expected to be honest, dropping down to only half a megabyte — but the forum still returns a nondescript error when uploading reaches 100%, just like with the uncompressed file. Is it because my forum account is too new or something?Powered by Discourse, best viewed with JavaScript enabled"
44,unix-graphics-feature-deprecation-schedule,"Support for 32-bit x86 kernels
The Linux-x86 and FreeBSD-x86 release packages, as well as support for 32-bit kernels in the Solaris package, are no longer provided starting with release 396.Support for 32-bit applications running on x86_64 kernels will continue.See Support Plan for 32-bit and 64-bit Operating Systems | NVIDIA for more details.Support for Fermi-based GPUs
Fermi-based GPUs are no longer supported starting with release 396.  These GPUs were supported through the release 390 legacy branch, which received critical bug fixes and updates for compatibility with new Linux kernels and X server versions through the end of 2022.See What's a legacy driver? | NVIDIA for a list of Fermi-based GPUs.Minimum kernel version
The release 410 series was the last to support Linux 2.6.9 kernels. After that, the minimum required Linux kernel version moved to 2.6.32.
The release 470 series was the last to support Linux 2.6.32 kernels. After that, the minimum required Linux kernel version moved to 3.10.
The release 550 series will be the last to support Linux 3.10 kernels. After that, the minimum required Linux kernel version will move to Linux 4.15.Minimum X server version
The release 410 series was the last to support X.Org X servers older than version 1.5.
The release 418 series was the last to support X.Org X servers older than version 1.7.Minimum glibc version
The release 415 series was the last to support glibc 2.2.5 on Linux x86_64. After that, the minimum required glibc version for Linux x86_64 moved to 2.11.Support for non-GLVND OpenGL and EGL libraries on Linux
The release 430 series was the last to support installing Linux OpenGL and EGL client libraries that do not use the GL Vendor Neutral Dispatch (GLVND) loader library.Support for Serial Digital Interface (SDI) video output and capture
The release 430 series was the last to support the NVIDIA Quadro SDI Output and NVIDIA Quadro SDI Capture cards.Support for SLI AA/AFR/SFR modes
The release 450 series was the last to support the following SLI modes:
- AA
- AFR
- SFRSLI Mosaic, Base Mosaic, GL_NV_gpu_multicast, and GLX_NV_multigpu_context will continue to be supported in future driver series.A quick update for those who use FreeBSD but don’t regularly read the FreeBSD forum: I created a post over there similar to this one, with the added note that support for FreeBSD 10.3 and older will end after release 396.https://devtalk.nvidia.com/default/topic/1035610/freebsd/freebsd-feature-deprecation-schedule/The first post has been updated to include an increase in the minimum supported Linux kernel version.The first post has been updated to include an increase in the minimum supported glibc version.The first post has been updated to include an increase in the minimum supported X server version.The first post has been updated to note that support for Linux non-GLVND OpenGL and EGL client libraries will be removed in a future release.The first post has been updated to note that support for SDI video output and capture will be removed in a future release.The first post has been updated to note that support for SLI AA/AFR/SFR modes will be removed in a future release.The first post has been updated to note that the release 470 series will be the last to support Linux 2.6.32 kernels. After that, the minimum required Linux kernel version will move to 3.10.The first post has been updated to note that the release 550 series will be the last to support Linux 3.10 kernels. After that, the minimum required Linux kernel version will move to Linux 4.15.Powered by Discourse, best viewed with JavaScript enabled"
45,linux-solaris-and-freebsd-driver-470-199-02-legacy-for-gkxxx-kepler-gpus,"Release highlights since 470.182.03:Updated nvidia-modprobe to create symbolic links in /dev/char when creating the /dev/nvidia* device nodes. This resolves an issue that prevented the device nodes from working with newer versions of runc:Newer runc versions break support for NVIDIA GPUs · Issue #3708 · opencontainers/runc · GitHub[README | Linux x86_64 | Solaris | FreeBSD x86_64]Powered by Discourse, best viewed with JavaScript enabled"
46,external-monitor-issue-on-ubuntu-22-04-jammy-using-nvidia-510-and-470-proprietary-drivers,"I’m not able to see my external monitors on Ubuntu 22.04 64-bit using the latest or second latest proprietary drivers. I dual boot with Windows 11 and the Windows OS with Nvidia drivers can see the drivers clearly. Only when I revert to Ubuntu Noveau drivers can I see the external monitors. Enabling/Disabling Secure Boot in BIOS has no impact. Nvidia RTX 3060 Mobile GPU. Running the two external monitors through a DisplayPort hub. Everything works fine with it in Windows 11.Please run nvidia-bug-report.sh as root and attach the resulting nvidia-bug-report.log.gz file to your post.Please see attached: nvidia-bug-report.log.gz (310.6 KB)Just a heads up, I did a separate but related post on the Ubuntu forums b/c a USB-C DisplayPort 1.4 capable hub freezes Jammy if I were to remove and reinsert the hub into my laptop using the Noveau drivers. Windows 11 does a better job at handling this behavior and there’s no OS crash involved with the latest NVIDIA 512.xx drivers installed.Another interesting note, with the NVIDIA 510 driver installed, if I replug the blank monitors via hub into my laptop, one of the monitors has an “Out Of Range” message.Does it work if you switch to performance mode?
sudo prime-select nvidiaSo that does have an impact to where if I now reinsert the USBC hub, both external monitors no longer fade to black (standby mode) but I’m still not getting any video signal. Ubuntu now sees the 2 external monitors in the OS display setting and it does appear the windows I have open are moving to another screen when I change the primary monitor, but still no signal from the monitors themselves.Working solution: So if I set the resolution to the exact same on all 3 monitors, the external ones begin to properly display: (1920x1080 which is also my native laptop monitor resolution). From there I can readjust the monitors to their respective native resolutions. The settings will also remain persistent after a reboot but you need to replug the hub back into the USBC port after you login in order to get the external screens to reappear.Does copying
~/.config/monitors.xml
to
/var/lib/gdm3/.config/monitors.xml
help with the monitors working without un-/replug?Not really. In my setup, the /var/lib/gdm3/.config/monitors.xml was initially missing.Have you fixed this problem? I dont seen an update on this post but I am facing a similar issue where on the latest 515 driver my RTX2070 just switched off the second monitor and would not bring it back even if i go to displays and try to set the joined displays set up. It just doesnt want to use the second monitor anymore. So annoyingI am attaching also the bug report from my systemnvidia-bug-report.log.gz (173.1 KB)I will try to restard the computer as there is no way right now to get the two screens back hoping it will get fixed.
Notice sometimes the problem is present when i start the computer, then eventually goes away if i restart. So unstableYea it’s definitely unstable. I found that adjusting the resolution on each external monitor would bring them back online but I believe you have to do this every reboot unless there’s a way to modify a config file and preset the working resolutions. I also forget if upgrading to the latest Ubuntu build also fixed the issue in the end but that’s what I remember doing.New updates, drivers or new kernels and i get back to this problem. Can Nvidia provide any help to troubleshoot please?Dell Inc. Precision 7760
NVIDIA RTX Series (Notebooks): NVIDIA T1200 Laptop GPUThe following driver is, in theory, compatible.Download the English (US) Linux x64 (AMD64/EM64T) Display Driver for  Linux 64-bit systems. Released 2023.7.18Ubuntu updated the Linux kernel, and now I cannot display my two external monitors. I had this issue initially when I installed 22.04, but I was able to use one of the Nvidia drivers available to fix the problem. Now no available driver fixes the problem, and installing older drivers, which I think may have fixed the issue previously, yields no results.Powered by Discourse, best viewed with JavaScript enabled"
47,prime-no-offloading-required-prime-is-it-supported,"Hi,I’ve installed Nvidia 450 on new  installation of Kubuntu 20.04.1.Prime Render Offload works in manual mode with __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidiaBut nvidia-settings says prime is not supported.
And so I have no prime entry in the nvidia window.So I think the swith between integrated and nvidia GPU will not be automatic and the “on demand” does not work.What is wrong ? Thank you for your help.Computer :
Asus A17-TUF766IU-H7074TOS Details :
Kubuntu 20.04.1 with mainline 5.8.8 kernel
Nvidia Driver version : 450.66
Desktop Environment : Plasma
Window Manager : KDEHardware Details
Processor : AMD Ryzen 4800H
GPU : GeForce GTX 1660 Ti 6 Gomeloli@Asus-A17:~$ __NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia glxinfo | egrep “(OpenGL vendor|OpenGL renderer|OpenGL version)”
OpenGL vendor string: NVIDIA Corporation
OpenGL renderer string: GeForce GTX 1660 Ti/PCIe/SSE2
OpenGL version string: 4.6.0 NVIDIA 450.66meloli@Asus-A17:~$  glxinfo | egrep “(OpenGL vendor|OpenGL renderer|OpenGL version)”
OpenGL vendor string: X.Org
OpenGL renderer string: AMD RENOIR (DRM 3.38.0, 5.8.8-050808-generic, LLVM 10.0.0)
OpenGL version string: 4.6 (Compatibility Profile) Mesa 20.0.8meloli@Asus-A17:~$ nvidia-settings(nvidia-settings:6099): GLib-GObject-CRITICAL **: 14:05:53.205: g_object_unref: assertion ‘G_IS_OBJECT (object)’ failedERROR: nvidia-settings could not find the registry key file. This file should have been installed along with this driver at /usr/share/nvidia/nvidia-application-profiles-key-documentation. The
application profiles will continue to work, but values cannot be prepopulated or validated, and will not be listed in the help text. Please see the README for possible values and
descriptions.** Message: 14:05:53.270: PRIME: No offloading required. Abort
** Message: 14:05:53.271: PRIME: is it supported? nonvidia-bug-report.log.gz (224.8 KB)
Screenshot_20200911_142440806×213 56.1 KB
Sounds like render offload is working correctly. Currently, render offload is not enabled automatically – you have to launch specific applications on the dGPU using the environment variables.The messages from nvidia-settings and the prime menu page are patches that Ubuntu adds to the upstream nvidia-settings source. I’m not very familiar with them so I suggest contacting Ubuntu for support for that.Thank you for your answer. I’ve seen this entry here on a 435 kernel, so I don’t know if they exists today.It was not said that it was only for Ubuntu but I will ask Ubuntu users.The latest NVIDIA 435.17 Linux beta driver has added Vulkan and OpenGL+GLX support for PRIME render offload.
nvidia-prime-offloading-on-demand720×418 77.2 KB
Sounds like render offload is working correctly. Currently, render offload is not enabled automatically – you have to launch specific applications on the dGPU using the environment variables.The messages from nvidia-settings and the prime menu page are patches that Ubuntu adds to the upstream nvidia-settings source. I’m not very familiar with them so I suggest contacting Ubuntu for support for that.now in Ubuntu, still have to ‘__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia ./test’
or add ‘__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia’ to Envrioment Variables ?
is there any way to do something in code/cmake/makefile, then it can be run using ./test ?
Thanks!Powered by Discourse, best viewed with JavaScript enabled"
48,530-41-03-broken-for-all-3d-related-applications,"Driver version 530.41.03 causes several issues which makes gaming or working with 3D tools completly impossible. elite dangerous starts normal, but after being ingame for ~10sec. some weird gfx glitches with 3D objects are showing. if i continue the game even the hud elements are glitching.
in csgo (opengl) if my character (or the enemy) goes into a area with shadows the character gets completly black.
the same issues happen in many other games and also tools like blender, davinci resolve etc.
the only way for me to fix this, was downgrading the driver to a previous version.this will also happen on other pc’s. ryzen3600-desktop with a gtx1080,i7-laptop with a gtx1060, i5-laptop with a gtx1050,Operating System: Arch Linux
KDE Plasma Version: 5.27.4
KDE Frameworks Version: 5.105.0
Qt Version: 5.15.9
Kernel Version: 6.2.12-zen1-1-zen (64-bit)
Graphics Platform: X11
Processors: 16 × AMD Ryzen 7 5800X 8-Core Processor
Memory: 31.3 GiB of RAM
Graphics Processor: NVIDIA GeForce GTX 1070 Ti/PCIe/SSE2
Manufacturer: Gigabyte Technology Co., Ltd.
Product Name: A320M-S2H V2I am also having these issues in Arch Linux under the 530.41.03, specifically in Elite Dangerous. It is unplayable with this driver installed due to graphical glitches.This is a known issue for Elite Dangerous but doesn’t affect every app like you implied.Yeah, something isn’t right with recent driver releases. On both my GTX 960 and 1080 I get in-game models flickering in and out of existence in Metro: Redux as well. Halo MCC has graphical glitching where model vertices seem to stretch for like a few hundred milliseconds or something.I thought my 1080 was/is dying since I started experiencing a bunch of weird issues all at once but seeing the reports of people having issues even on Windows makes me think it’s a driver issue. FWIW, I get XID 8 under Linux when running superposition which according to Nvidia’s XID page isn’t hardware related. I get the crashes on Windows as well but applying a negative clock fixes it…?Not trying to hijack the thread with unrelated BS, just saying that there is something going on with recent drivers and the lack of any communication from Nvidia is frustrating. People might be throwing out perfectly fine hardware thinking it’s dying.Edit: just going to point out that the Taiga level in Metro Exodus is far worse. It’s so bad you literally cannot play using DX12.@BlueGoliath Xid 8 might very well be hardware related, please use gpu-burn to check your gpu.You mean this:Multi-GPU CUDA stress test. Contribute to wilicc/gpu-burn development by creating an account on GitHub.Nope, nothing:GPU 0: OKI then switched BIOS to the performance one(forgot I was on stock), increased the power draw to 280, and then applied a +1000Mhz OC to the memory. Still nothing.Also ran memtestG80:Final error count after 50 iterations over 7000 MiB of GPU memory: 0 errorsAgain, with 280 watt power limit and +1000mhz memory OC.I don’t want to hijack the thread any further so if there are any doubt left on the GPU being faulty i’ll move the discussion to a different thread. I have screenshots of clocks too. Boosts to 2025 as it always has.Side note: CUDA iterates the GPUs in reverse. Kinda weird.Made a Playthough of RE7. Game seems fine at first, but after ~30min into the game, the lightning is slightly off. Which doesnt happens on 525.89.
I’m currently playing RE8 also had weird lightning after some playing, but more annoying was getting constant Image Freeze (all displays where on freeze, not just the game) but audio was still running normal, this happens again after some playing (10-30min).
Went again back to 525.89 and issues are gonePlease create an nvidia-bug-report.log after running into issues.nvidia-bug-report.log.gz (803.2 KB)any ETA when we finally get a fix or rollback for this completly broken driver ?
i’m currently on version 525.89 which is not compatible with the new 6.3 kernel my distro dropped.
so downgrading isnt a option for too long, hurry plz up with your decicion.We have already filed a bug 4127336 internally for the tracking purpose and do have local repro as well.
Team is investigating issue on the priority, shall keep posted on it.Please try with driver 535.86.05 and share test results.Powered by Discourse, best viewed with JavaScript enabled"
49,cannot-login-anymore-after-installation-of-nvidia-driver-nvidia-tesla-470-driver,"HiI cannot login anymore after the installation of  nvidia driver  nvidia-tesla-470-driver for my Quadro K6000 on Debian 6.1I followed Nvidia prerequisites build up the kernel (compiled the kernel and I could log in again) I ran nvidia-detect which recommanded  nvidia-tesla-470-driver.
I ran the installation through : sudo apt install nvidia-tesla-470-driver
ended up well.
I reboot and I cannot log in anymore.What is wrong?
It seems to happen very often, and nobody is proposing a solution online.It was because gdm has been damaged by driver installation and I could fix it using
app-get install gdm3Powered by Discourse, best viewed with JavaScript enabled"
50,nvidia-535-86-05-unable-to-install-on-ubuntu-23-04,"Ubuntu 23.04
6.4 kernel
gtx 1060 mobileI had installed 535 driver and just played a videogame, got an update and clicked update. My system crashed, and I had to restartAfter booting tried  sudo apt --fix-broken install2 packages wasn’t installed properly:
nvidia-dkms-535
nvidia-driver-535post-install returns error 3
nvidia-bug-report.log (1001.7 KB)switched on previous version by installing 535-server driver, everything works with itPowered by Discourse, best viewed with JavaScript enabled"
51,530-41-03-external-monitor-stays-frozen-until-i-move-my-mouse,"I tried all the different nvidia variants (dkms, vanilla, lts), and all had this same behaviour.
When logged in, the external screen stays black. I’ve to move my mouse on it so it refreshes, then it will refresh everytime I move my mouse on the screen; it won’t (ever) otherwise.Downgrading every single NVIDIA package (to 525.89.02-2) did the trick.Lenovo Legion 5 (RTX 3060), on EndeavourOS with Cinnamon.nvidia-bug-report.log.gz (1.1 MB)Please embed the amdgpu module into the initrd and create an new nvidia-bug-report.log.nvidia-bug-report.log.gz (974.2 KB)I upgraded back to 530.x and checked a few things.
I’m using optimus-manager to control the GPU profiles. When setting it to nvidia only, the freeze is gone, but performance are terrible.The logs look better with amdgpu starting early but this obviously wasn’t the reason. 530.41 seems to introduce a lot of bugs, another user reported the same issue.I’m getting this also. This makes my setup impossible to use.And when I tried to see if the bug with orientation was resolved with this new version, I found that’s gotten even worse! It takes many seconds to change and locks up everything and only the mouse pointer moves on the internal screen, I can’t select or do anything, I have to reset.Every driver release in the last like 9 or so months has made my situation bad. (Not being able to use an external monitor without the internal one turned on, apparently random external monitor freezes, rotation not working properly.)I thought the “Linux support from Nvidia is bad” trope was overexaggerated, but this is all so insufferable that I am now seriously thinking of selling my Thinkpad P50 :(Edit: the aur/downgrade workaround below worked (after I also ran mkinitcpio -P)arch linux user here, downgrading to the previous version fixed this issue.Linux support from Nvidia is badthis goes above “bad support”, it’s more like sabotage towards linux users at this point :/time for anotherSame issue here.
Not nice for programming or writing.@mxmilkiib @florian.castellane @simon.klemenc
could you guys please post debug logs? looks like devs only reply when a moderate ammount of people do post them…nvidia-bug-report.log.gz (274.6 KB)Same error here with arch linux.After downgrading, the HDMI no longer works (not recognised). Trying to find which package is responsible.nvidia-bug-report.log.gz (603.3 KB)With each update, a new issue appears with my external monitor on my laptop. (External monitor is run by dedicated GPU)
This is another one that occurred with the latest update.
Truly amazing Nvidia.
nvidia-bug-report.log.gz (288.8 KB)Edit:
FYI this only seems to happen on Xorg for me. On Wayland this problem does not occur
but personally, I can’t use Wayland since it comes with its own set of issuesI have filed a bug 4074722 internally for original post, shall try for local repro and update.
If required, shall request more information.
Thanks in advance.I downgraded, but the previous few releases I can downgrade to all eventually freeze the external screen solid, requiring it to be disabled then re-enabled (only to freeze again later), like I reported in my original post on this forum.I’ve gone back to 530. and I can’t reproduce the mouse moving freeze problem, but the external monitor now full on freezes in roughly a matter of minutes (e.g. the first time I fullscreen or unfullscreen mpv) rather than roughly in tens of minutes.P.S. And I need to disable then enable my third monitor for it to be displayed on, because it’s black after login.P.P.S. Linux regression testing - what’s the issue in Nvidia practicing this?you downgraded all the packages?
my ignorelist:
lib32-nvidia-utils: ignoring package upgrade (525.89.02-1 => 530.41.03-1)
libxnvctrl: ignoring package upgrade (525.89.02-1 => 530.41.03-1)
nvidia-dkms: ignoring package upgrade (525.89.02-2 => 530.41.03-1)
nvidia-settings: ignoring package upgrade (525.89.02-1 => 530.41.03-1)
nvidia-utils: ignoring package upgrade (525.89.02-2 => 530.41.03-1)I tried to reproduce mouse lag/freeze issue but no luck so far on below setup.
I am using prime render offload configuration.
Lenovo + Fedora 37 + kernel 6.0.7-301.fc37.x86_64 + Quadro T1000 with Max-Q Design + Driver 530.41.03 + Xfce Version 4.16 + External Display GBT AORUS FI27Q-P with resolution “3840x2160” and refresh rate as 60 Hz@mxmilkiib
Can you please share nvidia bug report and reliable repro steps so that I can try the same on my setup and attempt for local repro again.@opisalwaysafag
Can you please confirm the consistency of repro. Is it every time you login and external screen stays black until you move mouse on external display.
How are you connecting external display with notebook, is it via dock or direct HDMI/DP connection ?As stated in a previous post, I’m using optimus-manager as I have a hybrid gpu setup (amd apu - 5600H + RTX 3060). When it’s set to hybrid mode, the second screen will be black, then freeze every single time untill I move my mouse on the display (situation in OP).
When it’s set to NVIDIA mode only, the second screen won’t freeze, but the performences are extremely poor (1-2 FPS, buggy video playback etc).It’s connected with HDMI to a TV.I shared a report on Xorg slowness, freezing and crashing with external monitor, Thinkpad w/ Optimus (GM107GLM [Quadro M2000M]) - #9 by mxmilkiib but I’ll add another one just now.I’ve also put more detail about my varient of external screen freeze problem as it’s more similar to the original post I made for an earlier driver than this 530.x “needs the mouse to move to update the image” issue.Powered by Discourse, best viewed with JavaScript enabled"
52,cant-install-nvidia-linux-x86-64-535-86-05-linux-driver,"I have an ASUS Model: G733ZW-XS96  that has a RTX 3070 TI graphics card. I am trying to install the LINUX driver NVIDIA-Linux-x86_64-535.86.05. I’ve downloaded it and moved it into my linux environment. When I run it I get a message that says I don’t have supported GPU.What distribution are you running? Have you tried using your distribution’s driver package if available?SandyThanks for the response.Ubuntu 22.04.2 LTS.RonSo, have you tried using the NVIDIA drivers provided by Ubuntu? I don’t
recall which version 22.04 has, but it shouldn’t be /too/ far behind the
latest.Powered by Discourse, best viewed with JavaScript enabled"
53,gpu-does-not-suspend-even-after-configuring-rtd3,"Hi, I am using Acer Aspire 5(A515-57G) laptop with NVIDIA 2050 card and gentoo linux as OS. After configuring RTD3 setting using this guide https://download.nvidia.com/XFree86/Linux-x86_64/535.86.05/README/dynamicpowermanagement.html .
Even when the GPU has no active processes, there seems to be a persistent 5MB Video memory reservation which seems to make it not want to suspend.cat /sys/bus/pci/devices/0000:01:00.0/power/control shows thiscat /sys/bus/pci/devices/0000:01:00.0/power/runtime_status shows thiscat /etc/X11/xorg.conf shows thiscat /etc/modprobe.d/nvidia.conf shows thisand finally nvidia-smi shows thisHow do I make it so that, the GPU can be suspended, hence preventing GPU from draining my battery further.If this is also needed. nvidia-bug-report.log.gz (72.8 KB)Edit: Added nvidia-bug-report.log.gzPowered by Discourse, best viewed with JavaScript enabled"
54,maximize-and-full-screen-do-not-span-both-monitors-rhel9-t1000-gnome40,"Basic info:
RHEL9.2
NVIDIA drivers 535.86.05
monitors: two 1920x1080
Quadro T1000 Mobil
Gnome 40Problem:
when I maximize a window or go full screen the window only covers 1 monitor and I want it to span both. I have tested this with a gnome-terminal by right clicking and selecting maximize, and by pressing F11 to go full screen. I have also tested this with Firefox. The final goal is to get this to work with Chromium, in kiosk mode.Details:xrandr --display :1
Screen 0: minimum 8 x 8, current 3840 x 1080, maximum 32767 x 32767
DP-0 connected primary 1920x1080+1920+0 (normal left inverted right x axis y axis) 527mm x 296mm
1920x1080     60.00*+  74.97    59.94    50.00
1680x1050     59.95
1600x900      60.00
1440x900      59.89
1280x1024     75.02    60.02
1280x800      59.81
1280x720      60.00    59.94    50.00
1024x768      75.03    60.00
800x600       75.00    60.32
720x576       50.00
720x480       59.94
640x480       75.00    59.94    59.93
DP-1 disconnected (normal left inverted right x axis y axis)
DP-2 connected 1920x1080+0+0 (normal left inverted right x axis y axis) 527mm x 296mm
1920x1080     60.00*+  74.97    59.94    50.00
1680x1050     59.95
1600x900      60.00
1440x900      59.89
1280x1024     75.02    60.02
1280x800      59.81
1280x720      60.00    59.94    50.00
1024x768      75.03    60.00
800x600       75.00    60.32
720x576       50.00
720x480       59.94
640x480       75.00    59.94    59.93
DP-3 disconnected (normal left inverted right x axis y axis)
DP-4 disconnected (normal left inverted right x axis y axis)
DP-5 disconnected (normal left inverted right x axis y axis)
DP-6 disconnected (normal left inverted right x axis y axis)
DP-7 disconnected (normal left inverted right x axis y axis)I have tried several different settings for xorg.conf with some that don’t work at all, and none that allow me to go full screen across both monitors.
I am not an expert on xorg.conf settings, and I can not seem to find a complete list of options for the nvidia driver.The following are some excerpts out of the Xorg.0.log file:
[    28.010] (==) Log file: “/var/log/Xorg.0.log”, Time: Tue Aug  1 17:08:37 2023
[    28.010] (==) Using config file: “/etc/X11/xorg.conf”
[    28.010] (==) Using config directory: “/etc/X11/xorg.conf.d”
[    28.010] (==) Using system config directory “/usr/share/X11/xorg.conf.d”
[    28.011] (==) ServerLayout “Layout0”
[    28.011] () |–>Screen “Screen0” (0)
[    28.011] () |   |–>Monitor “Monitor0”
[    28.011] () |   |–>Device “Device0”
[    28.011] () |–>Screen “Screen1” (0)
[    28.011] () |   |–>Monitor “Monitor1”
[    28.011] () |   |–>Device “Device0”
[    28.011] () |–>Input Device “Keyboard0”
[    28.011] () |–>Input Device “Mouse0”
[    28.011] () Option “Xinerama” “0”
…
[    28.022] (==) NVIDIA(0): Using gamma correction (1.0, 1.0, 1.0)
[    28.022] (II) Applying OutputClass “nvidia” options to /dev/dri/card1
[    28.022] () NVIDIA(0): Option “SLI” “Auto”
[    28.022] () NVIDIA(0): Option “BaseMosaic” “on”
[    28.022] () NVIDIA(0): Option “AllowEmptyInitialConfiguration”
[    28.022] (WW) NVIDIA(0): Invalid SLI option: ‘Auto’; using single GPU rendering.
[    28.022] (**) NVIDIA(0): Enabling 2D acceleration
[    28.022] (II) Loading sub module “glxserver_nvidia”
[    28.022] (II) LoadModule: “glxserver_nvidia”
[    28.022] (II) Loading /usr/lib64/xorg/modules/extensions/libglxserver_nvidia.so
[    28.054] (II) Module glxserver_nvidia: vendor=“NVIDIA Corporation”
[    28.054]    compiled for 1.6.99.901, module version = 1.0.0
[    28.054]    Module class: X.Org Server Extension
[    28.054] (II) NVIDIA GLX Module  535.86.10  Wed Jul 26 23:07:55 UTC 2023
[    28.055] (II) NVIDIA: The X server supports PRIME Render Offload.
[    28.055] (WW) NVIDIA(0): Failed to initialize Base Mosaic!  Reason: Only one GPU
[    28.055] (WW) NVIDIA(0):     detected.  Only one GPU will be used for this X screen.
[    28.699] (–) NVIDIA(0): Valid display device(s) on GPU-0 at PCI:1:0:0
…
[    28.806] (II) NVIDIA(0): Validated MetaModes:
[    28.806] (II) NVIDIA(0):     “DFP-2:1920x1080,DFP-0:1920x1080”
[    28.806] (II) NVIDIA(0): Virtual screen size determined to be 3840 x 1080
[    28.852] (–) NVIDIA(0): DPI set to (92, 91); computed from “UseEdidDpi” X config
[    28.852] (–) NVIDIA(0):     option
[    28.853] (II) NVIDIA: Reserving 24576.00 MB of virtual memory for indirect memory
[    28.853] (II) NVIDIA:     access.
[    28.854] (II) NVIDIA(0): ACPI: failed to connect to the ACPI event daemon; the daemon
[    28.854] (II) NVIDIA(0):     may not be running or the “AcpidSocketPath” X
[    28.854] (II) NVIDIA(0):     configuration option may not be set correctly.  When the
[    28.854] (II) NVIDIA(0):     ACPI event daemon is available, the NVIDIA X driver will
[    28.854] (II) NVIDIA(0):     try to use it to receive ACPI event notifications.  For
[    28.854] (II) NVIDIA(0):     details, please see the “ConnectToAcpid” and
[    28.854] (II) NVIDIA(0):     “AcpidSocketPath” X configuration options in Appendix B: X
[    28.854] (II) NVIDIA(0):     Config Options in the README.
[    28.864] (II) NVIDIA(0): Setting mode “DFP-2:1920x1080,DFP-0:1920x1080”
…Powered by Discourse, best viewed with JavaScript enabled"
55,ubuntu22-04-gtx-3070-freezes-once-per-1-2-months-pc-becomes-unusable-fans-working,"Hi, I have a problem when typically once or twice per month my work PC stops responding and all fans are working. Usually it happens when there was an active Anydesk remote session that I forgot to close. When I tried to find the reason last time I think the culprit turned out to be the GPU, specifically some problems with the gnome-session. My driver version is 535.86.05
nvidia-bug-report.log (18.1 MB)P.S. For some reason it was taking an hour to process the gzipped log, so I attached unzipped versionPowered by Discourse, best viewed with JavaScript enabled"
56,driver-5-35-linux-6-3,"Hi,
Debian testing, X11, KDE, HDMI, external monitor.When I just use my laptop’s screen everything runs smooth. When HDMI is connected, here is the kind of
error that occurs after a few minutes:Error with kwin is really irritating and prevent any serious work to be done: the screen literally lock, I have to unplug the external screen to put everything back into order. Powermixer with preference to maximum performance won’t change anything.If you need any details… I will also post on KDE forum.nvidia-bug-report.tar.gz (856.0 KB)ThanksPowered by Discourse, best viewed with JavaScript enabled"
57,the-desktop-becomes-laggy-when-an-external-monitor-is-plugged-in,"I’m using Ubuntu 22.04 and nvidia-driver-525. The desktop I’m using is ubuntu:GNOME.I’m using a Legion Y9000X laptop, and it is connected to an external gpu dock of 2070 super. My laptop only has an intergrated Intel gpu. When I plugged the external monitor to the laptop (integrated gpu), everything is working smoothly. The desktop also works smoothly when no external monitor is plugged in. However, when I plugged the external monitor to the gpu dock under ubuntu:GNOME desktop, the desktop becomes very laggy. When I run nvidia-smi, it seems that the gnome is not using the nvidia gpu.image1572×1066 131 KBI tried to switch the desktop to xorg, but it gets stuck at the login page.However, in Windows, everything is smooth when I plugged the external monitor to the gpu dock.Is there any solution to this?Powered by Discourse, best viewed with JavaScript enabled"
58,black-terminal-isnt-working-on-freebsd-when-graphics-is-displayed,"When the graphics screen is displayed, Ctrl-Alt-F1 switches to the terminal but only large color bars are displayed there, and no login prompt is visible.When the user exits graphics - the terminal becomes available again.This bug has been present in the NVidia driver for a very long time.Is there any chance to fix it?Or, otherwise, what is the right place to report this problem?Thank you,
Yurinvidia-driver-510.60.02
NVidia GeForce RTX 2060
FreeBSD 13.1 STABLEPowered by Discourse, best viewed with JavaScript enabled"
59,nvidia-smi-show-no-devices-were-found-after-installing-nvidia-linux-x86-64-535-86-05-run-on-ubuntu-20-04-for-rtx-3060,"nvidia-bug-report.log.gz (386.4 KB)No error during installing NVIDIA-Linux-x86_64-535.86.05.run, nvidia-bug-report.log is attached, thanks in advance. → An alternate method of installing the NVIDIA driver was detected. (This is usually a package provided by your distributor.) A driver installed via that method may integrate better with your system than a driver installed by nvidia-installer.You installed the .run file version over a distro package version.
This usually creates a mess.
Now clean everything up:
With version 535.86.05 .run file:Then do a clean install of the nvidia driver.
It’s generally recommended to use the distro package:
sudo apt install nvidia-driver-XXXRemove the nomodeset kernel parameter.
Reboot.Powered by Discourse, best viewed with JavaScript enabled"
60,nvidia-lib-crashes-linux-server,"HelloWe are running ia/ml applications on Dell PowerEdge R730, linux centos 7.9 and Cuda 11.5.1 - version 495.29.05.The server is equiped with 2 Tesla P100 cards.
03:00.0 3D controller: NVIDIA Corporation GP100GL [Tesla P100 PCIe 16GB] (rev a1)
82:00.0 3D controller: NVIDIA Corporation GP100GL [Tesla P100 PCIe 16GB] (rev a1)About twice a month the server is crashing going to panic dumping the memory.
It happens under ia/ml job processing pressure and we found kernel module nvidia was the cause of the crash.The crashes occur when a command using nvidia module is running. We are using nvidia-smi to monitor the gpu activity. Most of the time it happens with nvidia-smi but can happen with any other software using nvidia gpus. This time it happenned with conda command.[…]
DATE: Tue Aug  1 09:00:49 2023
UPTIME: 15 days, 12:42:02
LOAD AVERAGE: 12.07, 5.42, 3.50
TASKS: 8789
NODENAME: slhdg002
RELEASE: 3.10.0-1160.62.1.el7.x86_64
VERSION: #1 SMP Tue Apr 5 16:57:59 UTC 2022
MACHINE: x86_64  (2199 Mhz)
MEMORY: 511.9 GB
PANIC: “BUG: unable to handle kernel NULL pointer dereference at 0000000000000048”
PID: 1959
COMMAND: “conda”
TASK: ffff8d791ae6b180  [THREAD_INFO: ffff8d7c3b304000]
CPU: 19
STATE: TASK_RUNNING (PANIC)[…]
[1341716.439797] CPU: 19 PID: 1959 Comm: conda Kdump: loaded Tainted: P           OE  ------------ T 3.10.0-1160.62.1.el7.x86_64 #1
[…]
[1341716.439972] Call Trace:
[1341716.440122]  [] ? _nv034134rm+0x162/0x2f0 [nvidia]
[1341716.440270]  [] ? _nv032925rm+0x13f/0x210 [nvidia]
[1341716.440433]  [] ? _nv032925rm+0x10e/0x210 [nvidia]
[…]We tried workarounds from the nvidia forum and from the web without any success:I was able to run nvidia-bug-report.sh when server is up, running and stable.I will attach vmcore-dmesg.txt and bug report file.nvidia-bug-report.log.gz (981.0 KB)
lspcivvv (153.2 KB)
vmcore-dmesg.txt (252.5 KB)495.29.05 is pretty old at this point. Does this problem still occur with the latest release (currently 535.86.05)?Thanks for your answer.
At this time we cannot do an upgrade as ml jobs are running in production on these 2 servers.
We also have servers equiped with V100 gpu cards and cuda 11.5 (495.29.05) and no crash occuring.Powered by Discourse, best viewed with JavaScript enabled"
61,can-i-boot-5-15-linux-kernel-on-agx-orin,"Is there any kernel 5.15 branch maintained by Nvidia?I don’t need the whole jetson software stack, only kernel with busybox shell would be ok.ThanksPowered by Discourse, best viewed with JavaScript enabled"
62,470-57-02-nvidia-30-series-hdmi-audio-stops-working-when-switching-from-60hz-to-120hz,"120hz works on all my LG OLED TVs with VRR using just about any Linux Distro. on every resolution except native which is odd, you would have to use 4096x2160p for sound to work at 4k.Nvidia driver version 470.129.06
Nvidia Card RTX 3090
HDMI 2.1 cable - Rocketfish 8K Ultra High Speed HDMI® 2.1 Certified Cable
Current Linux Distro - Fedora 36 (Workstation Edition)
Gnome 42.2
Windowing System - X11Alternatively, S/PDIF optical cable will work flawlessly connected directly to the TV or an external DAC. My current setup I have the HDMI cable connected directly to the TV and an optical out to an RME ADI-2 DAC FS which is convenient because I occasionally switch to Windows 11 for gaming with HDR/Dolby Atmos and output the sound through the TV and two KEF speakers to enhance the sound.I was having the same problems again with 510.73.05 on my RTX 3060 using Ubuntu 20.04.
Sadly my LG Blu Ray player/home theatre speaker system committed hara-kiri so I was forced to revisit HDMI audio to play audio through my TV while it is in for repairs.
Thankfully for me at 3840x2160 120Hz HDMI audio output now works with the updated driver 515.48.07.
I wish it was easier to get the current stable driver as a .deb but this works for now.Any updates on the Windows fix? I was sent an e-mail on 7/15/22 with a “GeForce Hotfix Driver” but this did not fix the problem. I’ve tried the HotFix driver and I still get the same results - 4k60, 4k120 HDR on/off audio skips with audio out over the same HDMI cable.Thank you for your feedback. We released a new GeForce Hotfix Driver v516.79 which includes a new HD audio driver. If you have not done so, can you give it a try and let us know if you are still seeing issues with Dolby Atmos?GeForce Hotfix Driver Version 516.79 | NVIDIAThis occured to me yesterday and doing a clean driver install fixed the issue.516.94
10900k
Strix z490e
EVGA FTW3 Ultra 3090
LG C1
Windows 10I had an issue where playing full-screen at 1440p @59 or @60hz my audio was muted until i switched the hdmi port in my tv.Tried a clean installation but the only thing that worked for me was going into nvidia’s control panel > adjust desktop size and position > perform scaling on > gpuNonetheless i had up to date windows drivers, same for the gpu and doing that minor change fixed the issue for meThe same is happening to me. Yeah, I know this is a Linux Thread, however, since I saw some mentions to Windows systems and this thread is actually a new one, I’ve decided to share my experience here.Well, same as some others here. Windows 10 or 11. After some time of no audio playback, the HDMI sound revert to Stereo. The only way to workaround this is switching from one display refresh rate to another and reverting back to the previous value.Changing the Nvidia driver to the HD Audio Driver (Windows native) also fix this.Pls, I’ve paid a lot to build my system to not be able to use it properly.3080Ti (HDMI 2.1) > QN90B (HDMI 2.1) > Q800B(eARC)I’m available for further troubleshooting if necessary, just call me.Pls, I’ve paid a lot to build my system to not be able to use it properly.Yes, your 3080 Ti purchase was stupid. I’m sorry to break the news to you ;) (My 3080 cost me $300 after selling my 1080 Ti (and those went even more expensive at one point of the 2021 shortage ;)), so I can accept some trade-offs and work-arounds necessary to watch movies from my video card).I was blaming Nvidia this whole time, and of course this crap still isn’t fixed (their work-around only works sometimes/for some people), two years after Ampere’s release to the public, so they’re guilty and all… but isn’t it strange that no hardware review site/influencer is covering this story?I mean, everyone reported Radeon black screen problem (kind of similar to this one!) and very recently all the driver issues with Intel’s Alchemist. But for Nvidia, the best we can get is 2080 Ti artifacts and two generations later, 4090 power adapter burning. Otherwise, it’s just FPS in games. No mention that for like 7 generations, they can’t drive two 1080p displays without the GPU drawing 40 Watts, or that Ampere can’t play audio over HDMI without interrupts.To stay on topic: forcing low memory clocks with nvidia-smi still works as a work-around with 520.56.06, and is still necessary for my case.My bclk was dipping quite a bit below 100 on both auto and manually typing in 100. Raising it seems to have done the trick, no sound problems since I raised it to 100.0625 Mhz (the minimum amount I could put in) My DDR5 is now 6003 instead of 6000, but no problems so far!PS. This started with my new AM5 build, (I got the cheapest Asus b650 board I could find on black friday), on my previous AM4 build this never happened, but it’s bclk never fluctuated this much either, go figure…Guys, I don’t want to speak too soon, but I’ve installed 525.53 yesterday.In the release highlights, it says “Fixed an issue where HDMI audio output was not working in some cases, especially with high display refresh rates (120Hz, 100Hz, etc.) using Fixed Rate Link (FRL) transmission mode.”And in the last 24 hours, my HDMI audio was spotless. No forced low memory clocks, no nothing. Again, I don’t want to speak to soon… ;) How is you guys’ experience with this version? Is is truly fixed for everyone?This started with my new AM5 build, (…), on my previous AM4 build this never happened,For me this started when going from Z390 to Z690 (9th to 12th gen Intel, LGA115x to LGA1700, same 3080, same everything else, only mobo+CPU swapped). I never thought to bump BCLK specifically, I would totally try that to check on Intel side of things, but now apparently it was fixed driver-side ;)What driver are you on?Latest driver, 527.37, I have a GTX 1060 connected to my LG C9.
Before I raised bclk hdmi sound went out completely or started to crackle 25+ times a day, sometimes after 20 min of watching a youtube video for ex, sometimes after 5 sec. I then went into windows sound config and clicked on my lg tv and pressed config then test to play a sound and then cancel, that would kick the sound back to life until it went out again, super frustrating, since raising bclk not happened once. The fluctuating bclk is what drew my attention and gave me the idea, it’s still fluctuating, between 99.50∼100.70 now in cpu-z, but won’t go as low as before, I think I saw it at 98 something before. My gigabyte am4 board was like 99.95∼99.99 Mhz.PS. spread spectrum disabled didn’t seem to make a difference btw.Latest driver, 527.37Ah, you must be on Windows then.My quote was from the Linux driver’s release highlights (this is a Linux forum after all ;)), so maybe this fix has yet to come to official drivers on Windows side? I skimmed through a few recent Windows release highlights out of curiosity (both “game ready” and “studio” drivers past 525), but haven’t seen it there.Good thing you found that work-around, hope that helps others until the fix makes its way towards Windows desktops.Just wanted to chime in here, I’m on Win 11 running a 3080 with the latest drivers (528.02) and have this problem, but seeing the issue was apparently fixed in 516.94 while using Dolby Atmos. This reddit user claims to have found a workaround by purchasing a standalone Denon AVR-X3700H receiver (https://www.reddit.com/r/nvidia/comments/whan6h/the_unfortunate_fix_for_dolby_atmos_audio_drops/), but I’d really rather not have to spend additional $$ just to get this to work. @amrits can you confirm if this is still being worked on by the team? Thank you.Still having this issue with the latest drivers
-Win 11
-EVGA 3080TI
-Sony Bravia X90J 65""
-Optic fiber HDMI Cable test passed 4k 120Hz
When are we going to be able to use this function? 2 years later and still not fixed.Latest Nvidia drivers as of 6/28/2023 v545.29
EVGA RTX 3080
LG C2 hdmi port 1 to hdmi on 3080 via 4k 120hz hdmi 2.1 cable
Dolby Atmos JBL soundbar to hdmi port 2 ARC on c2 via hdmi 2.1 cable
When turning off the sound bar video from the pc cuts out and requires a reboot to restore and occurs after getting high pitched screaching/chattering audio until power cycling the sound bar. No amount of clean installed drivers from nvidia or evga have resolved the issue, all other systems are fully up to date and have no problems working with other systems. For as long as the card has been to market its ridiculous this functionality hasn’t been fixed yet.Nvida Sup’t/Dev Community,Not Fixed for Windows 10/11.
Nvidia driver 536.67Issue SummarySetup Details
Windows 11 → Windows Audio Endpoint > RTX 3090Ti > Sony TV > eARC > WisA SoundSend 5.1 (6-Ch Dolby Atmos)So what should I try in 2023 to squash these audio bugs with Ampere and Windows?!P.S. My audio setup works on all streaming apps via eARC and the same sound setup as well as working with 4K Blu-ray players and XBOX Series X works as well… Only thing is this Windows gaming rig sound is SO LONG TERM UNRELIABLE IT HURTS(Sorry for the Windows post, but this is the comprehensive thread I’ve found relating to this issue)I hope this helps anyone who hasn’t tried.I had the exact same issues as a lot of people with my PC (Windows 11) connected to my Sony Bravia TV HDMI port 4
Then my Onkyo Receiver plugged into HDMI port 3 eARC on my TV
VRR is enabled on HDMI port 4 and my computer is running at 120hrz
The issues with audio cutting out randomly on my Windows computer has been resolved by following the steps below
Navigate to Nvidia control panel and select “Change Resolution”
Scroll to the bottom of that screen until you see section 3, “Apply the following settings”
Change the settings to “Use NVIDIA color settings”
Change the Output color depth to highest possible.
In may case I changed it from 8 bpc to 12 bpc
This has complelty solved my audio issues using an amp along with eARC and 120hz motion.
I had the same issue using an RTX 3080 and I even upgraded my GFX card to an RTX 4070Ti with no resolve.
Anyway, hope this helps.I have tried your method.Problem is still there with my set up.My set up as follow
RTX 3080TI  driver 536.67
WINDOWS 11This solution has (at least temporarily) solved my problem.Windows 11 PC with RTX 3070 connected to SONY XH90 TV through HDMI 2.1 (HDMI 4) and Soundbar connected to HDMI 3 with eARC.Powered by Discourse, best viewed with JavaScript enabled"
63,linux-solaris-and-freebsd-driver-535-86-05-production-branch-release,"Release highlights since 535.54.03:[README | Linux x86_64 | Solaris | FreeBSD x86_64 | Kernel driver source]Powered by Discourse, best viewed with JavaScript enabled"
64,intel-13th-gen-with-focal-20-04-llvmpipe-instead-of-rtx-a500-which-is-invisible-driver-unclaimed,"The default kernel from which ubuntu 20.04 is installed is 5.15, but it is too old kernel for intel 13th gen, it works fine on 5.19 and 6.1 is the last version on which 20.04 works stably. I have them both installed but if it helps I’ll roll back to 5.19As said the mainline kernel 6.1 does not seem to be compatible.
Maybe this one is better suited:Ubuntu mainline kernels (https://kernel.ubuntu.com/~kernel-ppa/mainline) built for LTS releases

You can install specific kernels or install a release meta-package to automatically track point releases of the kernel.

Eg:  sudo apt-get install...I downloaded the missing files from this site i915 - kernel/git/firmware/linux-firmware.git - Repository of firmware blobs for use with the Linux kernel and put them in /lib/firmware/i915, specifically adlp_dmc_ver2_16.bin and i915/adlp_guc_70.bin because they were not in that locationYou should always be able to install a newer firmware package from ubuntu. i.e.
http://security.ubuntu.com/ubuntu/pool/main/l/linux-firmware/linux-firmware_20230323.gitbcdcfbcf-0ubuntu1.2_all.debNext purged driver via this command sudo apt-get remove --purge ‘^nvidia-.*’This will miss all the libnvidia* files.
sudo apt purge '*nvidia*' catches all.–uninstall parameter of the .run fileYou didn’t do this.There is no sign of the nvidia driver modules being being built in your new bug report.installed new from software and updates.Don’t use that if you want to see what is going on (and people like me, trying to help you).
use: sudo apt install nvidia-driver-XXXSo before installing the new driver, install this new kernel?Maybe this one is better suited:If I understood correctly, I should execute sudo add-apt-repository ppa:tuxinvader/lts-mainline
sudo apt update
and install one of these versions
-6.2.16-060216.202306051605
-6.3.13-060313.202307200757
-6.2.16-0
-6.3.13-0–uninstall parameter of the .run fileI’ve tried it ~/Downloads$ ./driver.run –uninstall, and got this:This will miss all the libnvidia* files.
sudo apt purge '*nvidia*' catches all.Done and installed new one by sudo apt install nvidia-driver-530 to be distinguishableYou should always be able to install a newer firmware package from ubuntu. i.e.Tried but gained this outputSo before installing the new driver, install this new kernel?Yes and the associated kernel-headers. Usually linux-headers-KERNEL_VERSION.I’ve tried it ~/Downloads$ ./driver.run –uninstall, and got this:--uninstallDone and installed new one by sudo apt install nvidia-driver-530 to be distinguishableWell, ok. You post no output, so can’t tell if it’s working.dkms status tells you if the driver modules have been built and installed successfully (must show installed, not just added, or built).Yes and the associated kernel-headers. Usually linux-headers-KERNEL_VERSION.Will do this now, but after this I think I should reload the driver by this procedure, if i am wrong correct me pleasethen installing the amd microcode package first might help.
But I’d just put that all on hold for now, as the intel driver seems to be working ok, right?Will do this now, but after this I think I should reload the driver by this procedure, if i am wrong correct me pleaseNo.
By installing a new kernel and it’s headers dkms modules for that kernel should be installed automativally.–uninstallDone that and output is ok:
There is no NVIDIA driver currently installed.And getting to work to install this new kernelBut I’d just put that all on hold for now, as the intel driver seems to be working ok, right?After taking these two more files and putting them into firmware/i915/ nvidia-bug-report.log output about it is looking okDone installing kernel, looks like headers were installed automatically.And it looks like sudo apt install nvidia-driver-530 is also installing 535dkms statusAnd it looks like sudo apt install nvidia-driver-530 is also installing 535Don’t know how that happens, but usually installing a new version via apt removes the old one.dkms statusNow for the first time you have the driver installed successfully it seems.nvidia-bug-report.log is almost emptyCan’t say anything about that, sorry.
Maybe run journalctl -b0 > journal.txt and attach it here.You rebooted, did you?You rebooted, did you?sudo reboot done of courserebooted once again and now nvidia-bug-report.log generated successfully, that was probably caused by chosing kernel version in gnome by advanced ubuntu instead of ubuntu sorry 4 thatLooks like we’re getting closer, I’ll be back at the office on Monday.nvidia-bug-report.log (1.6 MB)delete /etc/X11/xorg.conf. It’s just the wrong config.You are running a wayland session. Is that what you want?
I wouldn’t on Ubuntu 20.04. Too old.Reboot and create a new report.You are running a wayland session. Is that what you want?
I wouldn’t on Ubuntu 20.04. Too old.In X11 with Xorg, there was an issue - when I entered the settings, it triggered something like a logout. The same happened when I was opening one of my project’s solutions which uses osgEarth, and that, in turn, utilizes OpenGL. But when i manage to activate this gpu i can try to go back to x11 and see if this error persistsOn Monday, when I return to the office, I will immediately delete that config and gen new .log./etc/X11/xorg.conf deleted and reboted.nvidia-bug-report.log (1.6 MB)I also discovered something very interesting, the default system works quite sluggishly, for example, when I take a window and move it, there is a slight stuttering, or, for example, when opening the menu of installed applications, the animation is not smooth. When I run pacman nothing changesOddly enough, when I turn on something that will load the system, e.g. glxgears, everything suddenly starts to run smoothly.Please show the output of each of these commands:grep -r nvidia /lib/modprobe.d/ /etc/modprobe.d/grep -r nvidia /lib/udev/rules.d /etc/udev/rules.d/grep -r 10de /lib/udev/rules.d /etc/udev/rules.d/modprobe -vvv nvidiaNew important update:
I was able to fix it with sudo prime-select nvidiaSmoothness is back and 75Hz monitors work as if they had that muchThe card was detected and the display system changed to X11
Screenshot from 2023-08-07 08-47-29984×820 77.8 KBOutputNew log:
nvidia-bug-report.log (2.4 MB)I was able to fix it with sudo prime-select nvidiaThat would have been my next step.
At least we have a working driver now.I don’t have experience with wayland.
Looks like this rule disables wayland, when the nvidia driver is loaded.
You could try to disable that rule and see how it goes.sie 07 08:40:49 dgrabowski /usr/lib/gdm3/gdm-x-session[1302]: (WW) NVIDIA:     ‘/var/run/nvidia-xdriver-8f76dd29’ Permission denied
sie 07 08:41:20 dgrabowski /usr/lib/gdm3/gdm-x-session[1928]: (WW) NVIDIA:     ‘/var/run/nvidia-xdriver-595cfc81’ Permission denied
sie 07 08:41:54 dgrabowski /usr/lib/gdm3/gdm-x-session[3910]: (WW) NVIDIA:     ‘/var/run/nvidia-xdriver-a6895505’ Permission deniedThat’s the only thing I can see, that looks like an error, but I don’t know what to do about that and also don’t know what problem it may cause.But overall I think we’re quite good here now.When logging in, I just saw that I don’t have the option to choose wayland, but I don’t really care about wayland if the system is stable, I’ve chosen it just because it was more stable than x11 in that past perspective.The project with OpenGL also started to work stably and much smoother, no artifacts.Thank you very much Mart for your help I am very grateful.If there’s anything else you’d like me to do, let me knowThanks!Powered by Discourse, best viewed with JavaScript enabled"
65,geforce-gt-710-hdmi-hotplug-detection-hpd-doesnt-work-on-ubuntu,"Hello there. I have a problem with the HDMI cable hotplug detection in Ubuntu. If I’m not misunderstood, the mechanism should work like this: a HDMI cable contains the hotplug detect pin, if there is a link between the source and the sink, then this pin will be pulled up, the driver will detect a change of state of this pin from low to high and the sink will be shown as “connected” in the xrandr output. Similarly, if there is a change from high to low state of the hotplug pin, the driver should detect this and the sink should be shown as disconnected.
I have a video capture device which is connected to a PC with Ubuntu 20.04 via HDMI. Sometimes I need to simulate the HDMI cable unplugging so I pull down the hotplug detect pin. I can see the change of state in the udevadm monitor output, but the sink remains being “connected” in the xrandr output. My Nvidia driver version is 470.199.02, kernel version is 5.15.Here are some logs, hope it will help to better explain my problem
GamingComp_udevadm_output.txt (1.9 KB)nvidia-bug-report.log.gz (652.4 KB)Powered by Discourse, best viewed with JavaScript enabled"
66,insufficient-available-displayport-bandwidth-for-8-4k-monitors,"Hello,I’m trying to create configuration with eight 4K monitors as separate screens using two PNY T1000 4Gb video cards, but found that it can drive only 6 monitors at 3480x2150@60 and failed on seventh monitor:Datasheet for T1000 states that it supports 4x 3840 x 2160 @ 120Hz.How to fix this absence of bandwidth?Thanks.
nvidia-bug-report.log.gz (1.6 MB)
Xorg.0.log.tgz (169.2 KB)
xorg.conf (11.2 KB)Does that monitor still fail to set that mode if it’s the only one connected? DisplayPort negotiates the available bandwidth using an active handshake with the sink device, so it’s possible that the monitor itself, the cable, or the port on the GPU is limiting it. I would recommend swapping around monitors, cables, and ports to identify exactly which is the limiting factor here.I’m continue investigating with 8 identical plugs. Was able to create 2 screens each of 4 monitors of resolution 3840x2160 @ 60Hz, but when I try to build 8 separate 4K screens - again run into error about bandwidth or another one:After building configuration from scratch with nvidia-settings and saving it into xorg.conf I can’t start this configuration.Interesting, thanks. That’s a different error and kind of surprising. Can you generate and attach a bug report log from that configuration too?I’m also kind of curious whether this is specific to 8 separate X screens or if the problem also occurs if you have two X screens with four displays each. Would you mind giving that a try, if possible?At the moment I can’t reproduce that new error - I switched to configuration with only one T1000 card.But even in such ordinary configuration I can’t have 4 separate screens with 4K monitors - same error as initially - There was insufficient available DisplayPort bandwidth - and it seems like error appeared on output three. According to T1000 specification it can do 4K@120 Hz on each output - seems like driver count those lines for two 4K channels at 60Hz and then reports that no lines left. But it must use lines from each separate output when separate screens are configured?Here is bug report for this configuration - but now I’m really don’t know what else to try - older driver or more recent Linux (Ubuntu 23) version?This seems like fundamental problem now with even single T1000.nvidia-bug-report.log.gz (619.9 KB)So inability to create four separate screens on one T1000 video card must be driver error? Or information about support of four 4K@120Hz were false advertising for T1000? At least not for Linux? It would be nice to have some sort of official confirmation that such configuration is not possible…I returned to similar task, now with 3 T1000 8Gb video cards. Now with driver 535.54.03 and I still can’t create configuration with 4 4K@60Hz separate Screens. Only 3 4K@60Hz Screens allowed, if forth is added than “Invalid surface parameters” immediately appeared in log and no graphics started.I’m also kind of curious whether this is specific to 8 separate X screens or if the problem also occurs if you have two X screens with four displays each. Would you mind giving that a try, if possible?I tried this and all work fine when I had two X screens with four displays each. In such configuration I can have 4K@60Hz for each monitor. Same now with 3 video cards - having three X screens I can run all 12 monitors at 4K@60Hz, but when I start to create separate screens then only 3 screens are working.Powered by Discourse, best viewed with JavaScript enabled"
67,displayport-bandwidth-problem,"I have single T1000 card on Ubuntu system and want to start four separate 4K screens at 60 Hz each. I use nvidia-settings for configuring X layout. By default nvidia-settings put all monitors into one screen and that mode work as supposed - I can specify 3840x2160@60Hz for each monitor and after saving configuration and restarting X system all is set as supposed (similar picture for each monitor):
one_from_monitors_in_big_x_screen764×407 49.7 KBBut then I tried to create 4 separate screens with same 3840x2160@60Hz parameters X not started with following complain:It failed on initialization of second screen.
Specification of T1000 says it support 4x 4K @120Hz

I can’t understood why this problem is happened.My four monitors currently are plugs (all the same) with following parameters :(I tried different configurations with 2 and 3 cards, but returned to testing configuration with single card, hope someone can recognize what is the problem here).
Need to state that use of 1920x1080 resolutions or 30Hz refresh rates allow X system to start. The problem appeared when 4K@60Hz is used.nvidia-bug-report.log.gz (1.2 MB)Powered by Discourse, best viewed with JavaScript enabled"
